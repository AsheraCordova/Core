<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_73) on Mon Aug 05 11:30:48 IST 2019 -->
<title>API Help</title>
<meta name="date" content="2019-08-05">
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="Style">
<script type="text/javascript" src="script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="API Help";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="overview-summary.html">Overview</a></li>
<li>Package</li>
<li>Class</li>
<li class="navBarCell1Rev">Help</li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="index.html?help-doc.html" target="_top">Frames</a></li>
<li><a href="help-doc.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->

<style>
.accordion {
  background-color: #eee;
  color: #444;
  cursor: pointer;
  padding: 18px;
  width: 100%;
  border: none;
  text-align: left;
  outline: none;
  font-size: 15px;
  transition: 0.4s;
}

.active, .accordion:hover {
  background-color: #ccc; 
}

.panel {
  padding: 0 18px;
  display: none;
  background-color: white;
  overflow: hidden;
}
</style>
<div class="contentContainer">

<button class="accordion">Model extension</button>
<div class="panel">
  <p>
  Object to UI and UI to Object is the provided as part of the core framework. It is achieved using storing objects in certain scope of the application and the ui synchronizing it whenever an event happens.
  This provides easy but powerful way to achieve synchronizing ui to objects and vice versa by configuring few attributes on widgets. <br>
  
  	<h4>Scope:</h4>
    Scope where an object is stored can be one of the following:
    <ul>
    	<li>view - It is stored on the fragment which is the root for all views. When a fragment is destroyed, the object is also removed along with the fragment.</li>
    	<li>session - It is stored on the application object. As long as the application is alive, the object is available.</li>
    	<li>loopvar - Whenever we loop on object, a loopvar is created and stored on the widget on which we are looping. </li>
    </ul>
    
    <h4>Type:</h4>
    Objects can be stored in scope as:
    <ul>
    	<li>map - Simple map containing key value pair.</li>
    	<li>list - list of objects.</li>
    	<li>plainmap - <a href="https://github.com/Telefonica/java-plainmap">hierarchical map</a>. This simplifies querying map for inner objects. </li>
    </ul>
    
    <h4>Expression Statement:</h4>
     Expression statement is written to identity, move, store objects from ui to object and vice versa.
     
     <ul>
    	<li><b>var</b> - E.g let x = . from y->view into session as pathmap
    	<br> The above statement stores a intermediate variable x into session as pathmap
    	</li>
    	<li><b>modelPojoToUi</b> - E.g text=abcd from x->view<br>
    	Set text attribute on widget to abcd attribute from object x stored in scope view. 
    	</li>
    	<li><b>modelUiToPojo</b> - e.g abcd=text into x->view<br>
    	Set abcd attribute on object x stored in scope view to text attribute on widget. </li>
    	
    	<li><b>Event</b> - e.g y=z from z->view<br>
    	Store y to from object in scope view into event map. </li>
    	
    	<li><b>var store</b> - e.g y->intent as pathmap<br>
    	Store the object into a variable y on intent with type pathmap. </li>
    	
    	<li><b>var get</b> - e.g z from z->view<br>
    	Get z attribute from object z in scope view. </li>
    	
    	<li><b>loop var</b> - e.g  let x in c from y->view into session as pathmap<br>
    	Loop over c attribute of type list on object y in scope view. Create loop var x of type pathmap.</li>
    </ul>
    
    <h4>Methods/Params:</h4>
    
    
    <ul>
    	<li><b>modelPojoToUi</b>
    	<br>Used for synchronizing object to ui. 
    	</li>
    	<li><b>modelUiToPojo</b>
    	<br>Used for synchronizing ui to object. 
    	</li>
    	<li><b>modelSyncEvents</b>
    	<br>Event for which sync of ui to pojo and vice versa should happen. 
    	</li>
    	<li><b>modelParam</b>
    	<br>Store intermediate variables to scope. 
    	</li>
    	<li><b>updateModelData</b>
    	<br>Used to update object data in certain scope. 
    	</li>
    	
    	<li><b>modelFor</b>
    	<br>Used to loop on list to create multiple user interface elements. 
    	</li>

		<li><b>modelIdPath</b>
    	<br>Identifier property path in the object. 
    	</li>    	
    	<li><b>addModel</b>
    	<br>Append object to list stored in scope and update the user interface element. 
    	</li>
    	
    	<li><b>addModelByIndex</b>
    	<br>Add object to list at index stored in scope and update the user interface element. 
    	</li>
    	
    	<li><b>removeModelAtIndex</b>
    	<br>Remove object to list at index stored in scope and update the user interface element. 
    	</li>
    	<li><b>removeModelById</b>
    	<br>Remove object to list by id stored in scope and update the user interface element. 
    	</li>
    </ul>
    
    <h4>Usage:</h4>
    The following is general flow of application and this depicts where the methods and expression has to be used:
	<ol>
	  <li><b>Navigation to page:</b><br>
	 
	  Javascript data objects are born in the ts fragment files and finally stored in scope in native code. When we redirect to native screen, data is passed into method and this data is stored in certain scope 
	  as defined by the statement expression.
	 
	  <pre>
await this.navController.reset().navigate("fragment#framelayout#layout/recyclerview_1000_items.xml", 
	"testObj->view as pathmap", 
	{looptest: {textlayout: data}}).executeCommand();
	  </pre> 
	  The example above uses <b>var store</b> expression to store data specified into key "testObj" with scope view." 
	  </li>
	  <li><b>Sync of data displayed:</b><br>
	  	The data stored in scope is synched back and from the ui to object using modelPojoToUi, modelUiToPojo and modelSyncEvents.
	     <pre>
&lt;EditText android:layout_width="match_parent"
	android:layout_height="wrap_content"
	modelPojoToUi="text = emailIntent from testObj->session"
	modelUiToPojo="emailIntent = text into testObj->session"
	modelSyncEvents="onKey"
	onKey=""/&gt;
	</pre>
	The above example shows that testObj is present in session scope. The property text of the EditText is always kept in sync with the  emailIntent of testObj in session scope. The sync from UI to Object only happens when onKey event is triggered.  
	  </li>
	  <li><b>Get Modified data:</b><br>
	  The object stored in scope are modified in step 2. When event occurs, we can request the modified data when a event occurs such as click of a button.
	  <pre>
&lt;Button android:layout_width="wrap_content"
	android:layout_height="wrap_content" android:text="Get Data" android:onClick="getData(model=. from items->view)" /&gt;
	  </pre> 
	  
	  The above example requests an object stored with key "items" with scope view on event onClick of button. 
	  </li>
	</ol>     
  </p>
</div>
<button class="accordion">Validation Extensions (customErrorMessageKeys / customErrorMessageValues / formGroupId / validateForm / validation / validationErrorDisplayType)</button>
<div class="panel">
  <p>
  	<pre>
&lt;EditText android:layout_width="match_parent"
	android:layout_height="wrap_content"
	formGroupId="loginForm"
	v_required=""
	android:id="@+id/test1"
	customErrorMessageKeys="required"
	customErrorMessageValues="@string/sample_text"
	validationErrorDisplayType="label|style"
	style="@style/normalStyle"
	errorStyle="@style/errorStyle"/&gt;
&lt;TextView android:layout_width="match_parent"
	android:layout_height="wrap_content"
	android:id="@+id/test1Error"/&gt;
  	</pre>
  	
  	An example of validation is shown above:<br>
  	The above snippet adds editText with id "test1" to a form group "loginForm" with mandatory validation added. It display the error message on a label with id "test1Error" and changes style to errorStyle when validation fails.
  	It displays an custom error message "Sample text" when validation fails.<br><br>
  	validationErrorDisplayType can be of 3 types:<br>
  	a) popup - Only supported on android. Uses android setError on EditText.<br>
  	b) label - Display error text in label with id <id of form element> + Error. <br>
  	c) style - Changes the style property when validation fails.
  </p>
</div>
<button class="accordion">Drag & Drop (asDragSource)</button>
<div class="panel">
  <p>
  	The drag and drop can be achieved by configuring few attributes as shown below:
  	<br> 
  	<pre>
		&lt;View
			widget-override="View"
			android:id="@+id/onDrag0"
			asDragSource="emailIntent=testObj.emailIntent from testObj->view"
			android:layout_width="match_parent"
			android:layout_height="wrap_content"
			android:layout_margin="10dp"
			android:minHeight="50dp"
			android:background="#ff0"/&gt;
		&lt;View
			onDrag="onDrag"
			android:id="@+id/onDrag1"
			android:background="@drawable/drag_hovered_selector"
			android:layout_width="match_parent"
			android:layout_height="wrap_content"
			android:layout_margin="10dp"
			android:minHeight="50dp"/&gt;
	</pre>
	
	asDragSource marks View with id "onDrag0" as draggable and associated transfer object "emailIntent".
	onDrag marks the View with id "onDrag1" as droppable and  associates onDrag listener with it.
	When a drop happens on "onDrag1" View, transfer object "emailIntent" is transferred to this View. 
  </p>
</div>

<button class="accordion">Recycler View (layout)</button>
<div class="panel">
  <p>
  </p>
</div>

</li>
</ul>
</li>
</ul>
</div>
</div>
 

<script>
var acc = document.getElementsByClassName("accordion");
var i;

for (i = 0; i < acc.length; i++) {
  acc[i].addEventListener("click", function() {
    this.classList.toggle("active");
    var panel = this.nextElementSibling;
    if (panel.style.display === "block") {
      panel.style.display = "none";
    } else {
      panel.style.display = "block";
    }
  });
}
</script>

</div>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="overview-summary.html">Overview</a></li>
<li>Package</li>
<li>Class</li>
<li class="navBarCell1Rev">Help</li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="index.html?help-doc.html" target="_top">Frames</a></li>
<li><a href="help-doc.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
