//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: D:\Java\git\core-javafx-widget\SWTAndroid\src\main\java\r\android\widget\OverScroller.java
//

#define J2OBJC_IMPORTED_BY_JAVA_IMPLEMENTATION 1




#include "AnimationUtils.h"
#include "Context.h"
#include "DisplayMetrics.h"
#include "IOSPrimitiveArray.h"
#include "Interpolator.h"
#include "J2ObjC_source.h"
#include "Log.h"
#include "OverScroller.h"
#include "Resources.h"
#include "Scroller.h"
#include "SensorManager.h"
#include "ViewConfiguration.h"
#include "java/lang/Boolean.h"
#include "java/lang/Double.h"
#include "java/lang/Float.h"
#include "java/lang/Integer.h"
#include "java/lang/Long.h"
#include "java/lang/Math.h"




#pragma clang diagnostic error "-Wreturn-type"
#pragma clang diagnostic ignored "-Wswitch"


@interface ADOverScroller () {
 @public
  int32_t mMode_;
  ADOverScroller_SplineOverScroller *mScrollerX_;
  ADOverScroller_SplineOverScroller *mScrollerY_;
  id<ADInterpolator> mInterpolator_;
  bool mFlywheel_;
}

@end

J2OBJC_FIELD_SETTER(ADOverScroller, mScrollerX_, ADOverScroller_SplineOverScroller *)
J2OBJC_FIELD_SETTER(ADOverScroller, mScrollerY_, ADOverScroller_SplineOverScroller *)
J2OBJC_FIELD_SETTER(ADOverScroller, mInterpolator_, id<ADInterpolator>)

inline int32_t ADOverScroller_get_DEFAULT_DURATION(void);
#define ADOverScroller_DEFAULT_DURATION 250
J2OBJC_STATIC_FIELD_CONSTANT(ADOverScroller, DEFAULT_DURATION, int32_t)

inline int32_t ADOverScroller_get_SCROLL_MODE(void);
#define ADOverScroller_SCROLL_MODE 0
J2OBJC_STATIC_FIELD_CONSTANT(ADOverScroller, SCROLL_MODE, int32_t)

inline int32_t ADOverScroller_get_FLING_MODE(void);
#define ADOverScroller_FLING_MODE 1
J2OBJC_STATIC_FIELD_CONSTANT(ADOverScroller, FLING_MODE, int32_t)

__attribute__((unused)) static bool ADOverScroller_isFinished(ADOverScroller *self);

@interface ADOverScroller_SplineOverScroller () {
 @public
  int32_t mStart_;
  int32_t mCurrentPosition_;
  int32_t mFinal_;
  int32_t mVelocity_;
  float mCurrVelocity_;
  float mDeceleration_;
  int64_t mStartTime_;
  int32_t mDuration_;
  int32_t mSplineDuration_;
  int32_t mSplineDistance_;
  bool mFinished_;
  int32_t mOver_;
  float mFlingFriction_;
  int32_t mState_;
  float mPhysicalCoeff_;
}

+ (float)getDecelerationWithInt:(int32_t)velocity;

- (void)adjustDurationWithInt:(int32_t)start
                      withInt:(int32_t)oldFinal
                      withInt:(int32_t)newFinal;

- (void)startSpringbackWithInt:(int32_t)start
                       withInt:(int32_t)end
                       withInt:(int32_t)velocity;

- (double)getSplineDecelerationWithInt:(int32_t)velocity;

- (double)getSplineFlingDistanceWithInt:(int32_t)velocity;

- (int32_t)getSplineFlingDurationWithInt:(int32_t)velocity;

- (void)fitOnBounceCurveWithInt:(int32_t)start
                        withInt:(int32_t)end
                        withInt:(int32_t)velocity;

- (void)startBounceAfterEdgeWithInt:(int32_t)start
                            withInt:(int32_t)end
                            withInt:(int32_t)velocity;

- (void)startAfterEdgeWithInt:(int32_t)start
                      withInt:(int32_t)min
                      withInt:(int32_t)max
                      withInt:(int32_t)velocity;

- (void)onEdgeReached;

@end

inline float ADOverScroller_SplineOverScroller_get_GRAVITY(void);
#define ADOverScroller_SplineOverScroller_GRAVITY 2000.0f
J2OBJC_STATIC_FIELD_CONSTANT(ADOverScroller_SplineOverScroller, GRAVITY, float)

inline float ADOverScroller_SplineOverScroller_get_DECELERATION_RATE(void);
inline float ADOverScroller_SplineOverScroller_set_DECELERATION_RATE(float value);
inline float *ADOverScroller_SplineOverScroller_getRef_DECELERATION_RATE(void);
static float ADOverScroller_SplineOverScroller_DECELERATION_RATE;
J2OBJC_STATIC_FIELD_PRIMITIVE(ADOverScroller_SplineOverScroller, DECELERATION_RATE, float)

inline float ADOverScroller_SplineOverScroller_get_INFLEXION(void);
#define ADOverScroller_SplineOverScroller_INFLEXION 0.35f
J2OBJC_STATIC_FIELD_CONSTANT(ADOverScroller_SplineOverScroller, INFLEXION, float)

inline float ADOverScroller_SplineOverScroller_get_START_TENSION(void);
#define ADOverScroller_SplineOverScroller_START_TENSION 0.5f
J2OBJC_STATIC_FIELD_CONSTANT(ADOverScroller_SplineOverScroller, START_TENSION, float)

inline float ADOverScroller_SplineOverScroller_get_END_TENSION(void);
#define ADOverScroller_SplineOverScroller_END_TENSION 1.0f
J2OBJC_STATIC_FIELD_CONSTANT(ADOverScroller_SplineOverScroller, END_TENSION, float)

inline float ADOverScroller_SplineOverScroller_get_P1(void);
#define ADOverScroller_SplineOverScroller_P1 0.175f
J2OBJC_STATIC_FIELD_CONSTANT(ADOverScroller_SplineOverScroller, P1, float)

inline float ADOverScroller_SplineOverScroller_get_P2(void);
#define ADOverScroller_SplineOverScroller_P2 0.35000002f
J2OBJC_STATIC_FIELD_CONSTANT(ADOverScroller_SplineOverScroller, P2, float)

inline int32_t ADOverScroller_SplineOverScroller_get_NB_SAMPLES(void);
#define ADOverScroller_SplineOverScroller_NB_SAMPLES 100
J2OBJC_STATIC_FIELD_CONSTANT(ADOverScroller_SplineOverScroller, NB_SAMPLES, int32_t)

inline IOSFloatArray *ADOverScroller_SplineOverScroller_get_SPLINE_POSITION(void);
static IOSFloatArray *ADOverScroller_SplineOverScroller_SPLINE_POSITION;
J2OBJC_STATIC_FIELD_OBJ_FINAL(ADOverScroller_SplineOverScroller, SPLINE_POSITION, IOSFloatArray *)

inline IOSFloatArray *ADOverScroller_SplineOverScroller_get_SPLINE_TIME(void);
static IOSFloatArray *ADOverScroller_SplineOverScroller_SPLINE_TIME;
J2OBJC_STATIC_FIELD_OBJ_FINAL(ADOverScroller_SplineOverScroller, SPLINE_TIME, IOSFloatArray *)

inline int32_t ADOverScroller_SplineOverScroller_get_SPLINE(void);
#define ADOverScroller_SplineOverScroller_SPLINE 0
J2OBJC_STATIC_FIELD_CONSTANT(ADOverScroller_SplineOverScroller, SPLINE, int32_t)

inline int32_t ADOverScroller_SplineOverScroller_get_CUBIC(void);
#define ADOverScroller_SplineOverScroller_CUBIC 1
J2OBJC_STATIC_FIELD_CONSTANT(ADOverScroller_SplineOverScroller, CUBIC, int32_t)

inline int32_t ADOverScroller_SplineOverScroller_get_BALLISTIC(void);
#define ADOverScroller_SplineOverScroller_BALLISTIC 2
J2OBJC_STATIC_FIELD_CONSTANT(ADOverScroller_SplineOverScroller, BALLISTIC, int32_t)

__attribute__((unused)) static float ADOverScroller_SplineOverScroller_getDecelerationWithInt_(int32_t velocity);

__attribute__((unused)) static void ADOverScroller_SplineOverScroller_adjustDurationWithInt_withInt_withInt_(ADOverScroller_SplineOverScroller *self, int32_t start, int32_t oldFinal, int32_t newFinal);

__attribute__((unused)) static void ADOverScroller_SplineOverScroller_startSpringbackWithInt_withInt_withInt_(ADOverScroller_SplineOverScroller *self, int32_t start, int32_t end, int32_t velocity);

__attribute__((unused)) static double ADOverScroller_SplineOverScroller_getSplineDecelerationWithInt_(ADOverScroller_SplineOverScroller *self, int32_t velocity);

__attribute__((unused)) static double ADOverScroller_SplineOverScroller_getSplineFlingDistanceWithInt_(ADOverScroller_SplineOverScroller *self, int32_t velocity);

__attribute__((unused)) static int32_t ADOverScroller_SplineOverScroller_getSplineFlingDurationWithInt_(ADOverScroller_SplineOverScroller *self, int32_t velocity);

__attribute__((unused)) static void ADOverScroller_SplineOverScroller_fitOnBounceCurveWithInt_withInt_withInt_(ADOverScroller_SplineOverScroller *self, int32_t start, int32_t end, int32_t velocity);

__attribute__((unused)) static void ADOverScroller_SplineOverScroller_startBounceAfterEdgeWithInt_withInt_withInt_(ADOverScroller_SplineOverScroller *self, int32_t start, int32_t end, int32_t velocity);

__attribute__((unused)) static void ADOverScroller_SplineOverScroller_startAfterEdgeWithInt_withInt_withInt_withInt_(ADOverScroller_SplineOverScroller *self, int32_t start, int32_t min, int32_t max, int32_t velocity);

__attribute__((unused)) static void ADOverScroller_SplineOverScroller_onEdgeReached(ADOverScroller_SplineOverScroller *self);

@implementation ADOverScroller

- (instancetype)initWithADContext:(ADContext *)context {
  ADOverScroller_initWithADContext_(self, context);
  return self;
}

- (instancetype)initWithADContext:(ADContext *)context
               withADInterpolator:(id<ADInterpolator>)interpolator {
  ADOverScroller_initWithADContext_withADInterpolator_(self, context, interpolator);
  return self;
}

- (instancetype)initWithADContext:(ADContext *)context
               withADInterpolator:(id<ADInterpolator>)interpolator
                      withBoolean:(bool)flywheel {
  ADOverScroller_initWithADContext_withADInterpolator_withBoolean_(self, context, interpolator, flywheel);
  return self;
}

- (instancetype)initWithADContext:(ADContext *)context
               withADInterpolator:(id<ADInterpolator>)interpolator
                        withFloat:(float)bounceCoefficientX
                        withFloat:(float)bounceCoefficientY {
  ADOverScroller_initWithADContext_withADInterpolator_withFloat_withFloat_(self, context, interpolator, bounceCoefficientX, bounceCoefficientY);
  return self;
}

- (instancetype)initWithADContext:(ADContext *)context
               withADInterpolator:(id<ADInterpolator>)interpolator
                        withFloat:(float)bounceCoefficientX
                        withFloat:(float)bounceCoefficientY
                      withBoolean:(bool)flywheel {
  ADOverScroller_initWithADContext_withADInterpolator_withFloat_withFloat_withBoolean_(self, context, interpolator, bounceCoefficientX, bounceCoefficientY, flywheel);
  return self;
}

- (void)setInterpolatorWithADInterpolator:(id<ADInterpolator>)interpolator {
  if (interpolator == nil) {
    JreStrongAssignAndConsume(&mInterpolator_, new_ADScroller_ViscousFluidInterpolator_init());
  }
  else {
    JreStrongAssign(&mInterpolator_, interpolator);
  }
}

- (void)setFrictionWithFloat:(float)friction {
  [((ADOverScroller_SplineOverScroller *) nil_chk(mScrollerX_)) setFrictionWithFloat:friction];
  [((ADOverScroller_SplineOverScroller *) nil_chk(mScrollerY_)) setFrictionWithFloat:friction];
}

- (bool)isFinished {
  return ADOverScroller_isFinished(self);
}

- (void)forceFinishedWithBoolean:(bool)finished {
  ((ADOverScroller_SplineOverScroller *) nil_chk(mScrollerX_))->mFinished_ = ((ADOverScroller_SplineOverScroller *) nil_chk(mScrollerY_))->mFinished_ = finished;
}

- (int32_t)getCurrX {
  return ((ADOverScroller_SplineOverScroller *) nil_chk(mScrollerX_))->mCurrentPosition_;
}

- (int32_t)getCurrY {
  return ((ADOverScroller_SplineOverScroller *) nil_chk(mScrollerY_))->mCurrentPosition_;
}

- (float)getCurrVelocity {
  return (float) JavaLangMath_hypotWithDouble_withDouble_(((ADOverScroller_SplineOverScroller *) nil_chk(mScrollerX_))->mCurrVelocity_, ((ADOverScroller_SplineOverScroller *) nil_chk(mScrollerY_))->mCurrVelocity_);
}

- (int32_t)getStartX {
  return ((ADOverScroller_SplineOverScroller *) nil_chk(mScrollerX_))->mStart_;
}

- (int32_t)getStartY {
  return ((ADOverScroller_SplineOverScroller *) nil_chk(mScrollerY_))->mStart_;
}

- (int32_t)getFinalX {
  return ((ADOverScroller_SplineOverScroller *) nil_chk(mScrollerX_))->mFinal_;
}

- (int32_t)getFinalY {
  return ((ADOverScroller_SplineOverScroller *) nil_chk(mScrollerY_))->mFinal_;
}

- (int32_t)getDuration {
  return JavaLangMath_maxWithInt_withInt_(((ADOverScroller_SplineOverScroller *) nil_chk(mScrollerX_))->mDuration_, ((ADOverScroller_SplineOverScroller *) nil_chk(mScrollerY_))->mDuration_);
}

- (void)extendDurationWithInt:(int32_t)extend {
  [((ADOverScroller_SplineOverScroller *) nil_chk(mScrollerX_)) extendDurationWithInt:extend];
  [((ADOverScroller_SplineOverScroller *) nil_chk(mScrollerY_)) extendDurationWithInt:extend];
}

- (void)setFinalXWithInt:(int32_t)newX {
  [((ADOverScroller_SplineOverScroller *) nil_chk(mScrollerX_)) setFinalPositionWithInt:newX];
}

- (void)setFinalYWithInt:(int32_t)newY {
  [((ADOverScroller_SplineOverScroller *) nil_chk(mScrollerY_)) setFinalPositionWithInt:newY];
}

- (bool)computeScrollOffset {
  if (ADOverScroller_isFinished(self)) {
    return false;
  }
  {
    int64_t time;
    int64_t elapsedTime;
    int32_t duration;
    switch (mMode_) {
      case ADOverScroller_SCROLL_MODE:
      time = ADAnimationUtils_currentAnimationTimeMillis();
      elapsedTime = time - ((ADOverScroller_SplineOverScroller *) nil_chk(mScrollerX_))->mStartTime_;
      duration = mScrollerX_->mDuration_;
      if (elapsedTime < duration) {
        float q = [((id<ADInterpolator>) nil_chk(mInterpolator_)) getInterpolationWithFloat:elapsedTime / (float) duration];
        float q2 = [((id<ADInterpolator>) nil_chk(mInterpolator_)) getInterpolationWithFloat:(elapsedTime - 1) / (float) duration];
        [mScrollerX_ updateScrollWithFloat:q withFloat:q2];
        [((ADOverScroller_SplineOverScroller *) nil_chk(mScrollerY_)) updateScrollWithFloat:q withFloat:q2];
      }
      else {
        [self abortAnimation];
      }
      break;
      case ADOverScroller_FLING_MODE:
      if (!((ADOverScroller_SplineOverScroller *) nil_chk(mScrollerX_))->mFinished_) {
        if (![mScrollerX_ update]) {
          if (![mScrollerX_ continueWhenFinished]) {
            [mScrollerX_ finish];
          }
        }
      }
      if (!((ADOverScroller_SplineOverScroller *) nil_chk(mScrollerY_))->mFinished_) {
        if (![mScrollerY_ update]) {
          if (![mScrollerY_ continueWhenFinished]) {
            [mScrollerY_ finish];
          }
        }
      }
      break;
    }
  }
  return true;
}

- (void)startScrollWithInt:(int32_t)startX
                   withInt:(int32_t)startY
                   withInt:(int32_t)dx
                   withInt:(int32_t)dy {
  [self startScrollWithInt:startX withInt:startY withInt:dx withInt:dy withInt:ADOverScroller_DEFAULT_DURATION];
}

- (void)startScrollWithInt:(int32_t)startX
                   withInt:(int32_t)startY
                   withInt:(int32_t)dx
                   withInt:(int32_t)dy
                   withInt:(int32_t)duration {
  mMode_ = ADOverScroller_SCROLL_MODE;
  [((ADOverScroller_SplineOverScroller *) nil_chk(mScrollerX_)) startScrollWithInt:startX withInt:dx withInt:duration];
  [((ADOverScroller_SplineOverScroller *) nil_chk(mScrollerY_)) startScrollWithInt:startY withInt:dy withInt:duration];
}

- (bool)springBackWithInt:(int32_t)startX
                  withInt:(int32_t)startY
                  withInt:(int32_t)minX
                  withInt:(int32_t)maxX
                  withInt:(int32_t)minY
                  withInt:(int32_t)maxY {
  mMode_ = ADOverScroller_FLING_MODE;
  bool spingbackX = [((ADOverScroller_SplineOverScroller *) nil_chk(mScrollerX_)) springbackWithInt:startX withInt:minX withInt:maxX];
  bool spingbackY = [((ADOverScroller_SplineOverScroller *) nil_chk(mScrollerY_)) springbackWithInt:startY withInt:minY withInt:maxY];
  return spingbackX || spingbackY;
}

- (void)flingWithInt:(int32_t)startX
             withInt:(int32_t)startY
             withInt:(int32_t)velocityX
             withInt:(int32_t)velocityY
             withInt:(int32_t)minX
             withInt:(int32_t)maxX
             withInt:(int32_t)minY
             withInt:(int32_t)maxY {
  [self flingWithInt:startX withInt:startY withInt:velocityX withInt:velocityY withInt:minX withInt:maxX withInt:minY withInt:maxY withInt:0 withInt:0];
}

- (void)flingWithInt:(int32_t)startX
             withInt:(int32_t)startY
             withInt:(int32_t)velocityX
             withInt:(int32_t)velocityY
             withInt:(int32_t)minX
             withInt:(int32_t)maxX
             withInt:(int32_t)minY
             withInt:(int32_t)maxY
             withInt:(int32_t)overX
             withInt:(int32_t)overY {
  if (mFlywheel_ && !ADOverScroller_isFinished(self)) {
    float oldVelocityX = ((ADOverScroller_SplineOverScroller *) nil_chk(mScrollerX_))->mCurrVelocity_;
    float oldVelocityY = ((ADOverScroller_SplineOverScroller *) nil_chk(mScrollerY_))->mCurrVelocity_;
    if (JavaLangMath_signumWithFloat_(velocityX) == JavaLangMath_signumWithFloat_(oldVelocityX) && JavaLangMath_signumWithFloat_(velocityY) == JavaLangMath_signumWithFloat_(oldVelocityY)) {
      JrePlusAssignIntF(&velocityX, oldVelocityX);
      JrePlusAssignIntF(&velocityY, oldVelocityY);
    }
  }
  mMode_ = ADOverScroller_FLING_MODE;
  [((ADOverScroller_SplineOverScroller *) nil_chk(mScrollerX_)) flingWithInt:startX withInt:velocityX withInt:minX withInt:maxX withInt:overX];
  [((ADOverScroller_SplineOverScroller *) nil_chk(mScrollerY_)) flingWithInt:startY withInt:velocityY withInt:minY withInt:maxY withInt:overY];
}

- (void)notifyHorizontalEdgeReachedWithInt:(int32_t)startX
                                   withInt:(int32_t)finalX
                                   withInt:(int32_t)overX {
  [((ADOverScroller_SplineOverScroller *) nil_chk(mScrollerX_)) notifyEdgeReachedWithInt:startX withInt:finalX withInt:overX];
}

- (void)notifyVerticalEdgeReachedWithInt:(int32_t)startY
                                 withInt:(int32_t)finalY
                                 withInt:(int32_t)overY {
  [((ADOverScroller_SplineOverScroller *) nil_chk(mScrollerY_)) notifyEdgeReachedWithInt:startY withInt:finalY withInt:overY];
}

- (bool)isOverScrolled {
  return ((!((ADOverScroller_SplineOverScroller *) nil_chk(mScrollerX_))->mFinished_ && mScrollerX_->mState_ != ADOverScroller_SplineOverScroller_SPLINE) || (!((ADOverScroller_SplineOverScroller *) nil_chk(mScrollerY_))->mFinished_ && mScrollerY_->mState_ != ADOverScroller_SplineOverScroller_SPLINE));
}

- (void)abortAnimation {
  [((ADOverScroller_SplineOverScroller *) nil_chk(mScrollerX_)) finish];
  [((ADOverScroller_SplineOverScroller *) nil_chk(mScrollerY_)) finish];
}

- (int32_t)timePassed {
  int64_t time = ADAnimationUtils_currentAnimationTimeMillis();
  int64_t startTime = JavaLangMath_minWithLong_withLong_(((ADOverScroller_SplineOverScroller *) nil_chk(mScrollerX_))->mStartTime_, ((ADOverScroller_SplineOverScroller *) nil_chk(mScrollerY_))->mStartTime_);
  return (int32_t) (time - startTime);
}

- (bool)isScrollingInDirectionWithFloat:(float)xvel
                              withFloat:(float)yvel {
  int32_t dx = ((ADOverScroller_SplineOverScroller *) nil_chk(mScrollerX_))->mFinal_ - mScrollerX_->mStart_;
  int32_t dy = ((ADOverScroller_SplineOverScroller *) nil_chk(mScrollerY_))->mFinal_ - mScrollerY_->mStart_;
  return !ADOverScroller_isFinished(self) && JavaLangMath_signumWithFloat_(xvel) == JavaLangMath_signumWithFloat_(dx) && JavaLangMath_signumWithFloat_(yvel) == JavaLangMath_signumWithFloat_(dy);
}

- (double)getSplineFlingDistanceWithInt:(int32_t)velocity {
  return ADOverScroller_SplineOverScroller_getSplineFlingDistanceWithInt_(nil_chk(mScrollerY_), velocity);
}

- (void)dealloc {
  RELEASE_(mScrollerX_);
  RELEASE_(mScrollerY_);
  RELEASE_(mInterpolator_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x1, -1, 0, -1, -1, -1, -1 },
    { NULL, NULL, 0x1, -1, 1, -1, -1, -1, -1 },
    { NULL, NULL, 0x1, -1, 2, -1, -1, -1, -1 },
    { NULL, NULL, 0x1, -1, 3, -1, -1, -1, -1 },
    { NULL, NULL, 0x1, -1, 4, -1, -1, -1, -1 },
    { NULL, "V", 0x0, 5, 6, -1, -1, -1, -1 },
    { NULL, "V", 0x11, 7, 8, -1, -1, -1, -1 },
    { NULL, "Z", 0x11, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x11, 9, 10, -1, -1, -1, -1 },
    { NULL, "I", 0x11, -1, -1, -1, -1, -1, -1 },
    { NULL, "I", 0x11, -1, -1, -1, -1, -1, -1 },
    { NULL, "F", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "I", 0x11, -1, -1, -1, -1, -1, -1 },
    { NULL, "I", 0x11, -1, -1, -1, -1, -1, -1 },
    { NULL, "I", 0x11, -1, -1, -1, -1, -1, -1 },
    { NULL, "I", 0x11, -1, -1, -1, -1, -1, -1 },
    { NULL, "I", 0x11, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 11, 12, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 13, 12, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 14, 12, -1, -1, -1, -1 },
    { NULL, "Z", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 15, 16, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 15, 17, -1, -1, -1, -1 },
    { NULL, "Z", 0x1, 18, 19, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 20, 21, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 20, 22, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 23, 24, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 25, 24, -1, -1, -1, -1 },
    { NULL, "Z", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "I", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "Z", 0x1, 26, 27, -1, -1, -1, -1 },
    { NULL, "D", 0x0, 28, 12, -1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(initWithADContext:);
  methods[1].selector = @selector(initWithADContext:withADInterpolator:);
  methods[2].selector = @selector(initWithADContext:withADInterpolator:withBoolean:);
  methods[3].selector = @selector(initWithADContext:withADInterpolator:withFloat:withFloat:);
  methods[4].selector = @selector(initWithADContext:withADInterpolator:withFloat:withFloat:withBoolean:);
  methods[5].selector = @selector(setInterpolatorWithADInterpolator:);
  methods[6].selector = @selector(setFrictionWithFloat:);
  methods[7].selector = @selector(isFinished);
  methods[8].selector = @selector(forceFinishedWithBoolean:);
  methods[9].selector = @selector(getCurrX);
  methods[10].selector = @selector(getCurrY);
  methods[11].selector = @selector(getCurrVelocity);
  methods[12].selector = @selector(getStartX);
  methods[13].selector = @selector(getStartY);
  methods[14].selector = @selector(getFinalX);
  methods[15].selector = @selector(getFinalY);
  methods[16].selector = @selector(getDuration);
  methods[17].selector = @selector(extendDurationWithInt:);
  methods[18].selector = @selector(setFinalXWithInt:);
  methods[19].selector = @selector(setFinalYWithInt:);
  methods[20].selector = @selector(computeScrollOffset);
  methods[21].selector = @selector(startScrollWithInt:withInt:withInt:withInt:);
  methods[22].selector = @selector(startScrollWithInt:withInt:withInt:withInt:withInt:);
  methods[23].selector = @selector(springBackWithInt:withInt:withInt:withInt:withInt:withInt:);
  methods[24].selector = @selector(flingWithInt:withInt:withInt:withInt:withInt:withInt:withInt:withInt:);
  methods[25].selector = @selector(flingWithInt:withInt:withInt:withInt:withInt:withInt:withInt:withInt:withInt:withInt:);
  methods[26].selector = @selector(notifyHorizontalEdgeReachedWithInt:withInt:withInt:);
  methods[27].selector = @selector(notifyVerticalEdgeReachedWithInt:withInt:withInt:);
  methods[28].selector = @selector(isOverScrolled);
  methods[29].selector = @selector(abortAnimation);
  methods[30].selector = @selector(timePassed);
  methods[31].selector = @selector(isScrollingInDirectionWithFloat:withFloat:);
  methods[32].selector = @selector(getSplineFlingDistanceWithInt:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "mMode_", "I", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "mScrollerX_", "LADOverScroller_SplineOverScroller;", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
    { "mScrollerY_", "LADOverScroller_SplineOverScroller;", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
    { "mInterpolator_", "LADInterpolator;", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "mFlywheel_", "Z", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
    { "DEFAULT_DURATION", "I", .constantValue.asInt = ADOverScroller_DEFAULT_DURATION, 0x1a, -1, -1, -1, -1 },
    { "SCROLL_MODE", "I", .constantValue.asInt = ADOverScroller_SCROLL_MODE, 0x1a, -1, -1, -1, -1 },
    { "FLING_MODE", "I", .constantValue.asInt = ADOverScroller_FLING_MODE, 0x1a, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "LADContext;", "LADContext;LADInterpolator;", "LADContext;LADInterpolator;Z", "LADContext;LADInterpolator;FF", "LADContext;LADInterpolator;FFZ", "setInterpolator", "LADInterpolator;", "setFriction", "F", "forceFinished", "Z", "extendDuration", "I", "setFinalX", "setFinalY", "startScroll", "IIII", "IIIII", "springBack", "IIIIII", "fling", "IIIIIIII", "IIIIIIIIII", "notifyHorizontalEdgeReached", "III", "notifyVerticalEdgeReached", "isScrollingInDirection", "FF", "getSplineFlingDistance", "LADOverScroller_SplineOverScroller;" };
  static const J2ObjcClassInfo _ADOverScroller = { "OverScroller", "r.android.widget", ptrTable, methods, fields, 7, 0x1, 33, 8, -1, 29, -1, -1, -1 };
  return &_ADOverScroller;
}

@end

void ADOverScroller_initWithADContext_(ADOverScroller *self, ADContext *context) {
  ADOverScroller_initWithADContext_withADInterpolator_(self, context, nil);
}

ADOverScroller *new_ADOverScroller_initWithADContext_(ADContext *context) {
  J2OBJC_NEW_IMPL(ADOverScroller, initWithADContext_, context)
}

ADOverScroller *create_ADOverScroller_initWithADContext_(ADContext *context) {
  J2OBJC_CREATE_IMPL(ADOverScroller, initWithADContext_, context)
}

void ADOverScroller_initWithADContext_withADInterpolator_(ADOverScroller *self, ADContext *context, id<ADInterpolator> interpolator) {
  ADOverScroller_initWithADContext_withADInterpolator_withBoolean_(self, context, interpolator, true);
}

ADOverScroller *new_ADOverScroller_initWithADContext_withADInterpolator_(ADContext *context, id<ADInterpolator> interpolator) {
  J2OBJC_NEW_IMPL(ADOverScroller, initWithADContext_withADInterpolator_, context, interpolator)
}

ADOverScroller *create_ADOverScroller_initWithADContext_withADInterpolator_(ADContext *context, id<ADInterpolator> interpolator) {
  J2OBJC_CREATE_IMPL(ADOverScroller, initWithADContext_withADInterpolator_, context, interpolator)
}

void ADOverScroller_initWithADContext_withADInterpolator_withBoolean_(ADOverScroller *self, ADContext *context, id<ADInterpolator> interpolator, bool flywheel) {
  NSObject_init(self);
  if (interpolator == nil) {
    JreStrongAssignAndConsume(&self->mInterpolator_, new_ADScroller_ViscousFluidInterpolator_init());
  }
  else {
    JreStrongAssign(&self->mInterpolator_, interpolator);
  }
  self->mFlywheel_ = flywheel;
  JreStrongAssignAndConsume(&self->mScrollerX_, new_ADOverScroller_SplineOverScroller_initWithADContext_(context));
  JreStrongAssignAndConsume(&self->mScrollerY_, new_ADOverScroller_SplineOverScroller_initWithADContext_(context));
}

ADOverScroller *new_ADOverScroller_initWithADContext_withADInterpolator_withBoolean_(ADContext *context, id<ADInterpolator> interpolator, bool flywheel) {
  J2OBJC_NEW_IMPL(ADOverScroller, initWithADContext_withADInterpolator_withBoolean_, context, interpolator, flywheel)
}

ADOverScroller *create_ADOverScroller_initWithADContext_withADInterpolator_withBoolean_(ADContext *context, id<ADInterpolator> interpolator, bool flywheel) {
  J2OBJC_CREATE_IMPL(ADOverScroller, initWithADContext_withADInterpolator_withBoolean_, context, interpolator, flywheel)
}

void ADOverScroller_initWithADContext_withADInterpolator_withFloat_withFloat_(ADOverScroller *self, ADContext *context, id<ADInterpolator> interpolator, float bounceCoefficientX, float bounceCoefficientY) {
  ADOverScroller_initWithADContext_withADInterpolator_withBoolean_(self, context, interpolator, true);
}

ADOverScroller *new_ADOverScroller_initWithADContext_withADInterpolator_withFloat_withFloat_(ADContext *context, id<ADInterpolator> interpolator, float bounceCoefficientX, float bounceCoefficientY) {
  J2OBJC_NEW_IMPL(ADOverScroller, initWithADContext_withADInterpolator_withFloat_withFloat_, context, interpolator, bounceCoefficientX, bounceCoefficientY)
}

ADOverScroller *create_ADOverScroller_initWithADContext_withADInterpolator_withFloat_withFloat_(ADContext *context, id<ADInterpolator> interpolator, float bounceCoefficientX, float bounceCoefficientY) {
  J2OBJC_CREATE_IMPL(ADOverScroller, initWithADContext_withADInterpolator_withFloat_withFloat_, context, interpolator, bounceCoefficientX, bounceCoefficientY)
}

void ADOverScroller_initWithADContext_withADInterpolator_withFloat_withFloat_withBoolean_(ADOverScroller *self, ADContext *context, id<ADInterpolator> interpolator, float bounceCoefficientX, float bounceCoefficientY, bool flywheel) {
  ADOverScroller_initWithADContext_withADInterpolator_withBoolean_(self, context, interpolator, flywheel);
}

ADOverScroller *new_ADOverScroller_initWithADContext_withADInterpolator_withFloat_withFloat_withBoolean_(ADContext *context, id<ADInterpolator> interpolator, float bounceCoefficientX, float bounceCoefficientY, bool flywheel) {
  J2OBJC_NEW_IMPL(ADOverScroller, initWithADContext_withADInterpolator_withFloat_withFloat_withBoolean_, context, interpolator, bounceCoefficientX, bounceCoefficientY, flywheel)
}

ADOverScroller *create_ADOverScroller_initWithADContext_withADInterpolator_withFloat_withFloat_withBoolean_(ADContext *context, id<ADInterpolator> interpolator, float bounceCoefficientX, float bounceCoefficientY, bool flywheel) {
  J2OBJC_CREATE_IMPL(ADOverScroller, initWithADContext_withADInterpolator_withFloat_withFloat_withBoolean_, context, interpolator, bounceCoefficientX, bounceCoefficientY, flywheel)
}

bool ADOverScroller_isFinished(ADOverScroller *self) {
  return ((ADOverScroller_SplineOverScroller *) nil_chk(self->mScrollerX_))->mFinished_ && ((ADOverScroller_SplineOverScroller *) nil_chk(self->mScrollerY_))->mFinished_;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ADOverScroller)

J2OBJC_NAME_MAPPING(ADOverScroller, "r.android.widget", "AD")

J2OBJC_INITIALIZED_DEFN(ADOverScroller_SplineOverScroller)

@implementation ADOverScroller_SplineOverScroller

- (void)setFrictionWithFloat:(float)friction {
  mFlingFriction_ = friction;
}

- (instancetype)initWithADContext:(ADContext *)context {
  ADOverScroller_SplineOverScroller_initWithADContext_(self, context);
  return self;
}

- (void)updateScrollWithFloat:(float)q
                    withFloat:(float)q2 {
  int32_t distance = mFinal_ - mStart_;
  mCurrentPosition_ = mStart_ + JavaLangMath_roundWithFloat_(q * distance);
  mCurrVelocity_ = 1000.0f * (q - q2) * distance;
}

+ (float)getDecelerationWithInt:(int32_t)velocity {
  return ADOverScroller_SplineOverScroller_getDecelerationWithInt_(velocity);
}

- (void)adjustDurationWithInt:(int32_t)start
                      withInt:(int32_t)oldFinal
                      withInt:(int32_t)newFinal {
  ADOverScroller_SplineOverScroller_adjustDurationWithInt_withInt_withInt_(self, start, oldFinal, newFinal);
}

- (void)startScrollWithInt:(int32_t)start
                   withInt:(int32_t)distance
                   withInt:(int32_t)duration {
  mFinished_ = false;
  mCurrentPosition_ = mStart_ = start;
  mFinal_ = start + distance;
  mStartTime_ = ADAnimationUtils_currentAnimationTimeMillis();
  mDuration_ = duration;
  mDeceleration_ = 0.0f;
  mVelocity_ = 0;
}

- (void)finish {
  mCurrentPosition_ = mFinal_;
  mFinished_ = true;
}

- (void)setFinalPositionWithInt:(int32_t)position {
  mFinal_ = position;
  mSplineDistance_ = mFinal_ - mStart_;
  mFinished_ = false;
}

- (void)extendDurationWithInt:(int32_t)extend {
  int64_t time = ADAnimationUtils_currentAnimationTimeMillis();
  int32_t elapsedTime = (int32_t) (time - mStartTime_);
  mDuration_ = mSplineDuration_ = elapsedTime + extend;
  mFinished_ = false;
}

- (bool)springbackWithInt:(int32_t)start
                  withInt:(int32_t)min
                  withInt:(int32_t)max {
  mFinished_ = true;
  mCurrentPosition_ = mStart_ = mFinal_ = start;
  mVelocity_ = 0;
  mStartTime_ = ADAnimationUtils_currentAnimationTimeMillis();
  mDuration_ = 0;
  if (start < min) {
    ADOverScroller_SplineOverScroller_startSpringbackWithInt_withInt_withInt_(self, start, min, 0);
  }
  else if (start > max) {
    ADOverScroller_SplineOverScroller_startSpringbackWithInt_withInt_withInt_(self, start, max, 0);
  }
  return !mFinished_;
}

- (void)startSpringbackWithInt:(int32_t)start
                       withInt:(int32_t)end
                       withInt:(int32_t)velocity {
  ADOverScroller_SplineOverScroller_startSpringbackWithInt_withInt_withInt_(self, start, end, velocity);
}

- (void)flingWithInt:(int32_t)start
             withInt:(int32_t)velocity
             withInt:(int32_t)min
             withInt:(int32_t)max
             withInt:(int32_t)over {
  mOver_ = over;
  mFinished_ = false;
  mCurrVelocity_ = mVelocity_ = velocity;
  mDuration_ = mSplineDuration_ = 0;
  mStartTime_ = ADAnimationUtils_currentAnimationTimeMillis();
  mCurrentPosition_ = mStart_ = start;
  if (start > max || start < min) {
    ADOverScroller_SplineOverScroller_startAfterEdgeWithInt_withInt_withInt_withInt_(self, start, min, max, velocity);
    return;
  }
  mState_ = ADOverScroller_SplineOverScroller_SPLINE;
  double totalDistance = 0.0;
  if (velocity != 0) {
    mDuration_ = mSplineDuration_ = ADOverScroller_SplineOverScroller_getSplineFlingDurationWithInt_(self, velocity);
    totalDistance = ADOverScroller_SplineOverScroller_getSplineFlingDistanceWithInt_(self, velocity);
  }
  mSplineDistance_ = JreFpToInt((totalDistance * JavaLangMath_signumWithFloat_(velocity)));
  mFinal_ = start + mSplineDistance_;
  if (mFinal_ < min) {
    ADOverScroller_SplineOverScroller_adjustDurationWithInt_withInt_withInt_(self, mStart_, mFinal_, min);
    mFinal_ = min;
  }
  if (mFinal_ > max) {
    ADOverScroller_SplineOverScroller_adjustDurationWithInt_withInt_withInt_(self, mStart_, mFinal_, max);
    mFinal_ = max;
  }
}

- (double)getSplineDecelerationWithInt:(int32_t)velocity {
  return ADOverScroller_SplineOverScroller_getSplineDecelerationWithInt_(self, velocity);
}

- (double)getSplineFlingDistanceWithInt:(int32_t)velocity {
  return ADOverScroller_SplineOverScroller_getSplineFlingDistanceWithInt_(self, velocity);
}

- (int32_t)getSplineFlingDurationWithInt:(int32_t)velocity {
  return ADOverScroller_SplineOverScroller_getSplineFlingDurationWithInt_(self, velocity);
}

- (void)fitOnBounceCurveWithInt:(int32_t)start
                        withInt:(int32_t)end
                        withInt:(int32_t)velocity {
  ADOverScroller_SplineOverScroller_fitOnBounceCurveWithInt_withInt_withInt_(self, start, end, velocity);
}

- (void)startBounceAfterEdgeWithInt:(int32_t)start
                            withInt:(int32_t)end
                            withInt:(int32_t)velocity {
  ADOverScroller_SplineOverScroller_startBounceAfterEdgeWithInt_withInt_withInt_(self, start, end, velocity);
}

- (void)startAfterEdgeWithInt:(int32_t)start
                      withInt:(int32_t)min
                      withInt:(int32_t)max
                      withInt:(int32_t)velocity {
  ADOverScroller_SplineOverScroller_startAfterEdgeWithInt_withInt_withInt_withInt_(self, start, min, max, velocity);
}

- (void)notifyEdgeReachedWithInt:(int32_t)start
                         withInt:(int32_t)end
                         withInt:(int32_t)over {
  if (mState_ == ADOverScroller_SplineOverScroller_SPLINE) {
    mOver_ = over;
    mStartTime_ = ADAnimationUtils_currentAnimationTimeMillis();
    ADOverScroller_SplineOverScroller_startAfterEdgeWithInt_withInt_withInt_withInt_(self, start, end, end, JreFpToInt(mCurrVelocity_));
  }
}

- (void)onEdgeReached {
  ADOverScroller_SplineOverScroller_onEdgeReached(self);
}

- (bool)continueWhenFinished {
  switch (mState_) {
    case ADOverScroller_SplineOverScroller_SPLINE:
    if (mDuration_ < mSplineDuration_) {
      mCurrentPosition_ = mStart_ = mFinal_;
      mVelocity_ = JreFpToInt(mCurrVelocity_);
      mDeceleration_ = ADOverScroller_SplineOverScroller_getDecelerationWithInt_(mVelocity_);
      mStartTime_ += mDuration_;
      ADOverScroller_SplineOverScroller_onEdgeReached(self);
    }
    else {
      return false;
    }
    break;
    case ADOverScroller_SplineOverScroller_BALLISTIC:
    mStartTime_ += mDuration_;
    ADOverScroller_SplineOverScroller_startSpringbackWithInt_withInt_withInt_(self, mFinal_, mStart_, 0);
    break;
    case ADOverScroller_SplineOverScroller_CUBIC:
    return false;
  }
  [self update];
  return true;
}

- (bool)update {
  int64_t time = ADAnimationUtils_currentAnimationTimeMillis();
  int64_t currentTime = time - mStartTime_;
  if (currentTime == 0) {
    return mDuration_ > 0;
  }
  if (currentTime > mDuration_) {
    return false;
  }
  double distance = 0.0;
  switch (mState_) {
    case ADOverScroller_SplineOverScroller_SPLINE:
    {
      float t = (float) currentTime / mSplineDuration_;
      int32_t index = JreFpToInt((ADOverScroller_SplineOverScroller_NB_SAMPLES * t));
      float distanceCoef = 1.f;
      float velocityCoef = 0.f;
      if (index < ADOverScroller_SplineOverScroller_NB_SAMPLES) {
        float t_inf = (float) index / ADOverScroller_SplineOverScroller_NB_SAMPLES;
        float t_sup = (float) (index + 1) / ADOverScroller_SplineOverScroller_NB_SAMPLES;
        float d_inf = IOSFloatArray_Get(nil_chk(ADOverScroller_SplineOverScroller_SPLINE_POSITION), index);
        float d_sup = IOSFloatArray_Get(ADOverScroller_SplineOverScroller_SPLINE_POSITION, index + 1);
        velocityCoef = (d_sup - d_inf) / (t_sup - t_inf);
        distanceCoef = d_inf + (t - t_inf) * velocityCoef;
      }
      distance = distanceCoef * mSplineDistance_;
      mCurrVelocity_ = velocityCoef * mSplineDistance_ / mSplineDuration_ * 1000.0f;
      break;
    }
    case ADOverScroller_SplineOverScroller_BALLISTIC:
    {
      float t = currentTime / 1000.0f;
      mCurrVelocity_ = mVelocity_ + mDeceleration_ * t;
      distance = mVelocity_ * t + mDeceleration_ * t * t / 2.0f;
      break;
    }
    case ADOverScroller_SplineOverScroller_CUBIC:
    {
      float t = (float) (currentTime) / mDuration_;
      float t2 = t * t;
      float sign = JavaLangMath_signumWithFloat_(mVelocity_);
      distance = sign * mOver_ * (3.0f * t2 - 2.0f * t * t2);
      mCurrVelocity_ = sign * mOver_ * 6.0f * (-t + t2);
      break;
    }
  }
  mCurrentPosition_ = mStart_ + (int32_t) JavaLangMath_roundWithDouble_(distance);
  return true;
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, "V", 0x0, 0, 1, -1, -1, -1, -1 },
    { NULL, NULL, 0x0, -1, 2, -1, -1, -1, -1 },
    { NULL, "V", 0x0, 3, 4, -1, -1, -1, -1 },
    { NULL, "F", 0xa, 5, 6, -1, -1, -1, -1 },
    { NULL, "V", 0x2, 7, 8, -1, -1, -1, -1 },
    { NULL, "V", 0x0, 9, 8, -1, -1, -1, -1 },
    { NULL, "V", 0x0, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x0, 10, 6, -1, -1, -1, -1 },
    { NULL, "V", 0x0, 11, 6, -1, -1, -1, -1 },
    { NULL, "Z", 0x0, 12, 8, -1, -1, -1, -1 },
    { NULL, "V", 0x2, 13, 8, -1, -1, -1, -1 },
    { NULL, "V", 0x0, 14, 15, -1, -1, -1, -1 },
    { NULL, "D", 0x2, 16, 6, -1, -1, -1, -1 },
    { NULL, "D", 0x2, 17, 6, -1, -1, -1, -1 },
    { NULL, "I", 0x2, 18, 6, -1, -1, -1, -1 },
    { NULL, "V", 0x2, 19, 8, -1, -1, -1, -1 },
    { NULL, "V", 0x2, 20, 8, -1, -1, -1, -1 },
    { NULL, "V", 0x2, 21, 22, -1, -1, -1, -1 },
    { NULL, "V", 0x0, 23, 8, -1, -1, -1, -1 },
    { NULL, "V", 0x2, -1, -1, -1, -1, -1, -1 },
    { NULL, "Z", 0x0, -1, -1, -1, -1, -1, -1 },
    { NULL, "Z", 0x0, -1, -1, -1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(setFrictionWithFloat:);
  methods[1].selector = @selector(initWithADContext:);
  methods[2].selector = @selector(updateScrollWithFloat:withFloat:);
  methods[3].selector = @selector(getDecelerationWithInt:);
  methods[4].selector = @selector(adjustDurationWithInt:withInt:withInt:);
  methods[5].selector = @selector(startScrollWithInt:withInt:withInt:);
  methods[6].selector = @selector(finish);
  methods[7].selector = @selector(setFinalPositionWithInt:);
  methods[8].selector = @selector(extendDurationWithInt:);
  methods[9].selector = @selector(springbackWithInt:withInt:withInt:);
  methods[10].selector = @selector(startSpringbackWithInt:withInt:withInt:);
  methods[11].selector = @selector(flingWithInt:withInt:withInt:withInt:withInt:);
  methods[12].selector = @selector(getSplineDecelerationWithInt:);
  methods[13].selector = @selector(getSplineFlingDistanceWithInt:);
  methods[14].selector = @selector(getSplineFlingDurationWithInt:);
  methods[15].selector = @selector(fitOnBounceCurveWithInt:withInt:withInt:);
  methods[16].selector = @selector(startBounceAfterEdgeWithInt:withInt:withInt:);
  methods[17].selector = @selector(startAfterEdgeWithInt:withInt:withInt:withInt:);
  methods[18].selector = @selector(notifyEdgeReachedWithInt:withInt:withInt:);
  methods[19].selector = @selector(onEdgeReached);
  methods[20].selector = @selector(continueWhenFinished);
  methods[21].selector = @selector(update);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "mStart_", "I", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "mCurrentPosition_", "I", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "mFinal_", "I", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "mVelocity_", "I", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "mCurrVelocity_", "F", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "mDeceleration_", "F", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "mStartTime_", "J", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "mDuration_", "I", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "mSplineDuration_", "I", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "mSplineDistance_", "I", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "mFinished_", "Z", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "mOver_", "I", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "mFlingFriction_", "F", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "mState_", "I", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "GRAVITY", "F", .constantValue.asFloat = ADOverScroller_SplineOverScroller_GRAVITY, 0x1a, -1, -1, -1, -1 },
    { "mPhysicalCoeff_", "F", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "DECELERATION_RATE", "F", .constantValue.asLong = 0, 0xa, -1, 24, -1, -1 },
    { "INFLEXION", "F", .constantValue.asFloat = ADOverScroller_SplineOverScroller_INFLEXION, 0x1a, -1, -1, -1, -1 },
    { "START_TENSION", "F", .constantValue.asFloat = ADOverScroller_SplineOverScroller_START_TENSION, 0x1a, -1, -1, -1, -1 },
    { "END_TENSION", "F", .constantValue.asFloat = ADOverScroller_SplineOverScroller_END_TENSION, 0x1a, -1, -1, -1, -1 },
    { "P1", "F", .constantValue.asFloat = ADOverScroller_SplineOverScroller_P1, 0x1a, -1, -1, -1, -1 },
    { "P2", "F", .constantValue.asFloat = ADOverScroller_SplineOverScroller_P2, 0x1a, -1, -1, -1, -1 },
    { "NB_SAMPLES", "I", .constantValue.asInt = ADOverScroller_SplineOverScroller_NB_SAMPLES, 0x1a, -1, -1, -1, -1 },
    { "SPLINE_POSITION", "[F", .constantValue.asLong = 0, 0x1a, -1, 25, -1, -1 },
    { "SPLINE_TIME", "[F", .constantValue.asLong = 0, 0x1a, -1, 26, -1, -1 },
    { "SPLINE", "I", .constantValue.asInt = ADOverScroller_SplineOverScroller_SPLINE, 0x1a, -1, -1, -1, -1 },
    { "CUBIC", "I", .constantValue.asInt = ADOverScroller_SplineOverScroller_CUBIC, 0x1a, -1, -1, -1, -1 },
    { "BALLISTIC", "I", .constantValue.asInt = ADOverScroller_SplineOverScroller_BALLISTIC, 0x1a, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "setFriction", "F", "LADContext;", "updateScroll", "FF", "getDeceleration", "I", "adjustDuration", "III", "startScroll", "setFinalPosition", "extendDuration", "springback", "startSpringback", "fling", "IIIII", "getSplineDeceleration", "getSplineFlingDistance", "getSplineFlingDuration", "fitOnBounceCurve", "startBounceAfterEdge", "startAfterEdge", "IIII", "notifyEdgeReached", &ADOverScroller_SplineOverScroller_DECELERATION_RATE, &ADOverScroller_SplineOverScroller_SPLINE_POSITION, &ADOverScroller_SplineOverScroller_SPLINE_TIME, "LADOverScroller;" };
  static const J2ObjcClassInfo _ADOverScroller_SplineOverScroller = { "SplineOverScroller", "r.android.widget", ptrTable, methods, fields, 7, 0x8, 22, 28, 27, -1, -1, -1, -1 };
  return &_ADOverScroller_SplineOverScroller;
}

+ (void)initialize {
  if (self == [ADOverScroller_SplineOverScroller class]) {
    ADOverScroller_SplineOverScroller_DECELERATION_RATE = (float) (JavaLangMath_logWithDouble_(0.78) / JavaLangMath_logWithDouble_(0.9));
    JreStrongAssignAndConsume(&ADOverScroller_SplineOverScroller_SPLINE_POSITION, [IOSFloatArray newArrayWithLength:ADOverScroller_SplineOverScroller_NB_SAMPLES + 1]);
    JreStrongAssignAndConsume(&ADOverScroller_SplineOverScroller_SPLINE_TIME, [IOSFloatArray newArrayWithLength:ADOverScroller_SplineOverScroller_NB_SAMPLES + 1]);
    {
      float x_min = 0.0f;
      float y_min = 0.0f;
      for (int32_t i = 0; i < ADOverScroller_SplineOverScroller_NB_SAMPLES; i++) {
        float alpha = (float) i / ADOverScroller_SplineOverScroller_NB_SAMPLES;
        float x_max = 1.0f;
        float x;
        float tx;
        float coef;
        while (true) {
          x = x_min + (x_max - x_min) / 2.0f;
          coef = 3.0f * x * (1.0f - x);
          tx = coef * ((1.0f - x) * ADOverScroller_SplineOverScroller_P1 + x * ADOverScroller_SplineOverScroller_P2) + x * x * x;
          if (JavaLangMath_absWithFloat_(tx - alpha) < 1E-5) break;
          if (tx > alpha) x_max = x;
          else x_min = x;
        }
        *IOSFloatArray_GetRef(ADOverScroller_SplineOverScroller_SPLINE_POSITION, i) = coef * ((1.0f - x) * ADOverScroller_SplineOverScroller_START_TENSION + x) + x * x * x;
        float y_max = 1.0f;
        float y;
        float dy;
        while (true) {
          y = y_min + (y_max - y_min) / 2.0f;
          coef = 3.0f * y * (1.0f - y);
          dy = coef * ((1.0f - y) * ADOverScroller_SplineOverScroller_START_TENSION + y) + y * y * y;
          if (JavaLangMath_absWithFloat_(dy - alpha) < 1E-5) break;
          if (dy > alpha) y_max = y;
          else y_min = y;
        }
        *IOSFloatArray_GetRef(ADOverScroller_SplineOverScroller_SPLINE_TIME, i) = coef * ((1.0f - y) * ADOverScroller_SplineOverScroller_P1 + y * ADOverScroller_SplineOverScroller_P2) + y * y * y;
      }
      *IOSFloatArray_GetRef(ADOverScroller_SplineOverScroller_SPLINE_POSITION, ADOverScroller_SplineOverScroller_NB_SAMPLES) = *IOSFloatArray_GetRef(ADOverScroller_SplineOverScroller_SPLINE_TIME, ADOverScroller_SplineOverScroller_NB_SAMPLES) = 1.0f;
    }
    J2OBJC_SET_INITIALIZED(ADOverScroller_SplineOverScroller)
  }
}

@end

void ADOverScroller_SplineOverScroller_initWithADContext_(ADOverScroller_SplineOverScroller *self, ADContext *context) {
  NSObject_init(self);
  self->mFlingFriction_ = ADViewConfiguration_getScrollFriction();
  self->mState_ = ADOverScroller_SplineOverScroller_SPLINE;
  self->mFinished_ = true;
  float ppi = ((ADDisplayMetrics *) nil_chk([((ADResources *) nil_chk([((ADContext *) nil_chk(context)) getResources])) getDisplayMetrics]))->density_ * 160.0f;
  self->mPhysicalCoeff_ = ADSensorManager_GRAVITY_EARTH * 39.37f * ppi * 0.84f;
}

ADOverScroller_SplineOverScroller *new_ADOverScroller_SplineOverScroller_initWithADContext_(ADContext *context) {
  J2OBJC_NEW_IMPL(ADOverScroller_SplineOverScroller, initWithADContext_, context)
}

ADOverScroller_SplineOverScroller *create_ADOverScroller_SplineOverScroller_initWithADContext_(ADContext *context) {
  J2OBJC_CREATE_IMPL(ADOverScroller_SplineOverScroller, initWithADContext_, context)
}

float ADOverScroller_SplineOverScroller_getDecelerationWithInt_(int32_t velocity) {
  ADOverScroller_SplineOverScroller_initialize();
  return velocity > 0 ? -ADOverScroller_SplineOverScroller_GRAVITY : ADOverScroller_SplineOverScroller_GRAVITY;
}

void ADOverScroller_SplineOverScroller_adjustDurationWithInt_withInt_withInt_(ADOverScroller_SplineOverScroller *self, int32_t start, int32_t oldFinal, int32_t newFinal) {
  int32_t oldDistance = oldFinal - start;
  int32_t newDistance = newFinal - start;
  float x = JavaLangMath_absWithFloat_((float) newDistance / oldDistance);
  int32_t index = JreFpToInt((ADOverScroller_SplineOverScroller_NB_SAMPLES * x));
  if (index < ADOverScroller_SplineOverScroller_NB_SAMPLES) {
    float x_inf = (float) index / ADOverScroller_SplineOverScroller_NB_SAMPLES;
    float x_sup = (float) (index + 1) / ADOverScroller_SplineOverScroller_NB_SAMPLES;
    float t_inf = IOSFloatArray_Get(nil_chk(ADOverScroller_SplineOverScroller_SPLINE_TIME), index);
    float t_sup = IOSFloatArray_Get(ADOverScroller_SplineOverScroller_SPLINE_TIME, index + 1);
    float timeCoef = t_inf + (x - x_inf) / (x_sup - x_inf) * (t_sup - t_inf);
    JreTimesAssignIntF(&self->mDuration_, timeCoef);
  }
}

void ADOverScroller_SplineOverScroller_startSpringbackWithInt_withInt_withInt_(ADOverScroller_SplineOverScroller *self, int32_t start, int32_t end, int32_t velocity) {
  self->mFinished_ = false;
  self->mState_ = ADOverScroller_SplineOverScroller_CUBIC;
  self->mCurrentPosition_ = self->mStart_ = start;
  self->mFinal_ = end;
  int32_t delta = start - end;
  self->mDeceleration_ = ADOverScroller_SplineOverScroller_getDecelerationWithInt_(delta);
  self->mVelocity_ = -delta;
  self->mOver_ = JavaLangMath_absWithInt_(delta);
  self->mDuration_ = JreFpToInt((1000.0 * JavaLangMath_sqrtWithDouble_(-2.0 * delta / self->mDeceleration_)));
}

double ADOverScroller_SplineOverScroller_getSplineDecelerationWithInt_(ADOverScroller_SplineOverScroller *self, int32_t velocity) {
  return JavaLangMath_logWithDouble_(ADOverScroller_SplineOverScroller_INFLEXION * JavaLangMath_absWithInt_(velocity) / (self->mFlingFriction_ * self->mPhysicalCoeff_));
}

double ADOverScroller_SplineOverScroller_getSplineFlingDistanceWithInt_(ADOverScroller_SplineOverScroller *self, int32_t velocity) {
  double l = ADOverScroller_SplineOverScroller_getSplineDecelerationWithInt_(self, velocity);
  double decelMinusOne = ADOverScroller_SplineOverScroller_DECELERATION_RATE - 1.0;
  return self->mFlingFriction_ * self->mPhysicalCoeff_ * JavaLangMath_expWithDouble_(ADOverScroller_SplineOverScroller_DECELERATION_RATE / decelMinusOne * l);
}

int32_t ADOverScroller_SplineOverScroller_getSplineFlingDurationWithInt_(ADOverScroller_SplineOverScroller *self, int32_t velocity) {
  double l = ADOverScroller_SplineOverScroller_getSplineDecelerationWithInt_(self, velocity);
  double decelMinusOne = ADOverScroller_SplineOverScroller_DECELERATION_RATE - 1.0;
  return JreFpToInt((1000.0 * JavaLangMath_expWithDouble_(l / decelMinusOne)));
}

void ADOverScroller_SplineOverScroller_fitOnBounceCurveWithInt_withInt_withInt_(ADOverScroller_SplineOverScroller *self, int32_t start, int32_t end, int32_t velocity) {
  float durationToApex = -velocity / self->mDeceleration_;
  float velocitySquared = (float) velocity * velocity;
  float distanceToApex = velocitySquared / 2.0f / JavaLangMath_absWithFloat_(self->mDeceleration_);
  float distanceToEdge = JavaLangMath_absWithInt_(end - start);
  float totalDuration = (float) JavaLangMath_sqrtWithDouble_(2.0 * (distanceToApex + distanceToEdge) / JavaLangMath_absWithFloat_(self->mDeceleration_));
  self->mStartTime_ -= JreFpToInt((1000.0f * (totalDuration - durationToApex)));
  self->mCurrentPosition_ = self->mStart_ = end;
  self->mVelocity_ = JreFpToInt((-self->mDeceleration_ * totalDuration));
}

void ADOverScroller_SplineOverScroller_startBounceAfterEdgeWithInt_withInt_withInt_(ADOverScroller_SplineOverScroller *self, int32_t start, int32_t end, int32_t velocity) {
  self->mDeceleration_ = ADOverScroller_SplineOverScroller_getDecelerationWithInt_(velocity == 0 ? start - end : velocity);
  ADOverScroller_SplineOverScroller_fitOnBounceCurveWithInt_withInt_withInt_(self, start, end, velocity);
  ADOverScroller_SplineOverScroller_onEdgeReached(self);
}

void ADOverScroller_SplineOverScroller_startAfterEdgeWithInt_withInt_withInt_withInt_(ADOverScroller_SplineOverScroller *self, int32_t start, int32_t min, int32_t max, int32_t velocity) {
  if (start > min && start < max) {
    ADLog_eWithNSString_withNSString_(@"OverScroller", @"startAfterEdge called from a valid position");
    self->mFinished_ = true;
    return;
  }
  bool positive = start > max;
  int32_t edge = positive ? max : min;
  int32_t overDistance = start - edge;
  bool keepIncreasing = overDistance * velocity >= 0;
  if (keepIncreasing) {
    ADOverScroller_SplineOverScroller_startBounceAfterEdgeWithInt_withInt_withInt_(self, start, edge, velocity);
  }
  else {
    double totalDistance = ADOverScroller_SplineOverScroller_getSplineFlingDistanceWithInt_(self, velocity);
    if (totalDistance > JavaLangMath_absWithInt_(overDistance)) {
      [self flingWithInt:start withInt:velocity withInt:positive ? min : start withInt:positive ? start : max withInt:self->mOver_];
    }
    else {
      ADOverScroller_SplineOverScroller_startSpringbackWithInt_withInt_withInt_(self, start, edge, velocity);
    }
  }
}

void ADOverScroller_SplineOverScroller_onEdgeReached(ADOverScroller_SplineOverScroller *self) {
  float velocitySquared = (float) self->mVelocity_ * self->mVelocity_;
  float distance = velocitySquared / (2.0f * JavaLangMath_absWithFloat_(self->mDeceleration_));
  float sign = JavaLangMath_signumWithFloat_(self->mVelocity_);
  if (distance > self->mOver_) {
    self->mDeceleration_ = -sign * velocitySquared / (2.0f * self->mOver_);
    distance = self->mOver_;
  }
  self->mOver_ = JreFpToInt(distance);
  self->mState_ = ADOverScroller_SplineOverScroller_BALLISTIC;
  self->mFinal_ = self->mStart_ + JreFpToInt((self->mVelocity_ > 0 ? distance : -distance));
  self->mDuration_ = -JreFpToInt((1000.0f * self->mVelocity_ / self->mDeceleration_));
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ADOverScroller_SplineOverScroller)
