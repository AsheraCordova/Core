//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: D:\Java\git\core-javafx-widget\SWTAndroid\src\main\java\r\android\widget\Scroller.java
//

#define J2OBJC_IMPORTED_BY_JAVA_IMPLEMENTATION 1




#include "AnimationUtils.h"
#include "ApplicationInfo.h"
#include "Build.h"
#include "Context.h"
#include "DisplayMetrics.h"
#include "IOSPrimitiveArray.h"
#include "Interpolator.h"
#include "J2ObjC_source.h"
#include "Resources.h"
#include "Scroller.h"
#include "SensorManager.h"
#include "ViewConfiguration.h"
#include "java/lang/Boolean.h"
#include "java/lang/Double.h"
#include "java/lang/Float.h"
#include "java/lang/Integer.h"
#include "java/lang/Long.h"
#include "java/lang/Math.h"




#pragma clang diagnostic error "-Wreturn-type"
#pragma clang diagnostic ignored "-Wswitch"


@interface ADScroller () {
 @public
  id<ADInterpolator> mInterpolator_;
  int32_t mMode_;
  int32_t mStartX_;
  int32_t mStartY_;
  int32_t mFinalX_;
  int32_t mFinalY_;
  int32_t mMinX_;
  int32_t mMaxX_;
  int32_t mMinY_;
  int32_t mMaxY_;
  int32_t mCurrX_;
  int32_t mCurrY_;
  int64_t mStartTime_;
  int32_t mDuration_;
  float mDurationReciprocal_;
  float mDeltaX_;
  float mDeltaY_;
  bool mFinished_;
  bool mFlywheel_;
  float mVelocity_;
  float mCurrVelocity_;
  int32_t mDistance_;
  float mFlingFriction_;
  float mDeceleration_;
  float mPpi_;
  float mPhysicalCoeff_;
}

- (float)computeDecelerationWithFloat:(float)friction;

- (double)getSplineDecelerationWithFloat:(float)velocity;

- (int32_t)getSplineFlingDurationWithFloat:(float)velocity;

- (double)getSplineFlingDistanceWithFloat:(float)velocity;

@end

J2OBJC_FIELD_SETTER(ADScroller, mInterpolator_, id<ADInterpolator>)

inline int32_t ADScroller_get_DEFAULT_DURATION(void);
#define ADScroller_DEFAULT_DURATION 250
J2OBJC_STATIC_FIELD_CONSTANT(ADScroller, DEFAULT_DURATION, int32_t)

inline int32_t ADScroller_get_SCROLL_MODE(void);
#define ADScroller_SCROLL_MODE 0
J2OBJC_STATIC_FIELD_CONSTANT(ADScroller, SCROLL_MODE, int32_t)

inline int32_t ADScroller_get_FLING_MODE(void);
#define ADScroller_FLING_MODE 1
J2OBJC_STATIC_FIELD_CONSTANT(ADScroller, FLING_MODE, int32_t)

inline float ADScroller_get_DECELERATION_RATE(void);
inline float ADScroller_set_DECELERATION_RATE(float value);
inline float *ADScroller_getRef_DECELERATION_RATE(void);
static float ADScroller_DECELERATION_RATE;
J2OBJC_STATIC_FIELD_PRIMITIVE(ADScroller, DECELERATION_RATE, float)

inline float ADScroller_get_INFLEXION(void);
#define ADScroller_INFLEXION 0.35f
J2OBJC_STATIC_FIELD_CONSTANT(ADScroller, INFLEXION, float)

inline float ADScroller_get_START_TENSION(void);
#define ADScroller_START_TENSION 0.5f
J2OBJC_STATIC_FIELD_CONSTANT(ADScroller, START_TENSION, float)

inline float ADScroller_get_END_TENSION(void);
#define ADScroller_END_TENSION 1.0f
J2OBJC_STATIC_FIELD_CONSTANT(ADScroller, END_TENSION, float)

inline float ADScroller_get_P1(void);
#define ADScroller_P1 0.175f
J2OBJC_STATIC_FIELD_CONSTANT(ADScroller, P1, float)

inline float ADScroller_get_P2(void);
#define ADScroller_P2 0.35000002f
J2OBJC_STATIC_FIELD_CONSTANT(ADScroller, P2, float)

inline int32_t ADScroller_get_NB_SAMPLES(void);
#define ADScroller_NB_SAMPLES 100
J2OBJC_STATIC_FIELD_CONSTANT(ADScroller, NB_SAMPLES, int32_t)

inline IOSFloatArray *ADScroller_get_SPLINE_POSITION(void);
static IOSFloatArray *ADScroller_SPLINE_POSITION;
J2OBJC_STATIC_FIELD_OBJ_FINAL(ADScroller, SPLINE_POSITION, IOSFloatArray *)

inline IOSFloatArray *ADScroller_get_SPLINE_TIME(void);
static IOSFloatArray *ADScroller_SPLINE_TIME;
J2OBJC_STATIC_FIELD_OBJ_FINAL(ADScroller, SPLINE_TIME, IOSFloatArray *)

__attribute__((unused)) static float ADScroller_computeDecelerationWithFloat_(ADScroller *self, float friction);

__attribute__((unused)) static double ADScroller_getSplineDecelerationWithFloat_(ADScroller *self, float velocity);

__attribute__((unused)) static int32_t ADScroller_getSplineFlingDurationWithFloat_(ADScroller *self, float velocity);

__attribute__((unused)) static double ADScroller_getSplineFlingDistanceWithFloat_(ADScroller *self, float velocity);

@interface ADScroller_ViscousFluidInterpolator ()

+ (float)viscousFluidWithFloat:(float)x;

@end

/*!
 @brief Controls the viscous fluid effect (how much of it).
 */
inline float ADScroller_ViscousFluidInterpolator_get_VISCOUS_FLUID_SCALE(void);
#define ADScroller_ViscousFluidInterpolator_VISCOUS_FLUID_SCALE 8.0f
J2OBJC_STATIC_FIELD_CONSTANT(ADScroller_ViscousFluidInterpolator, VISCOUS_FLUID_SCALE, float)

inline float ADScroller_ViscousFluidInterpolator_get_VISCOUS_FLUID_NORMALIZE(void);
static float ADScroller_ViscousFluidInterpolator_VISCOUS_FLUID_NORMALIZE;
J2OBJC_STATIC_FIELD_PRIMITIVE_FINAL(ADScroller_ViscousFluidInterpolator, VISCOUS_FLUID_NORMALIZE, float)

inline float ADScroller_ViscousFluidInterpolator_get_VISCOUS_FLUID_OFFSET(void);
static float ADScroller_ViscousFluidInterpolator_VISCOUS_FLUID_OFFSET;
J2OBJC_STATIC_FIELD_PRIMITIVE_FINAL(ADScroller_ViscousFluidInterpolator, VISCOUS_FLUID_OFFSET, float)

__attribute__((unused)) static float ADScroller_ViscousFluidInterpolator_viscousFluidWithFloat_(float x);

J2OBJC_INITIALIZED_DEFN(ADScroller)

@implementation ADScroller

- (instancetype)initWithADContext:(ADContext *)context {
  ADScroller_initWithADContext_(self, context);
  return self;
}

- (instancetype)initWithADContext:(ADContext *)context
               withADInterpolator:(id<ADInterpolator>)interpolator {
  ADScroller_initWithADContext_withADInterpolator_(self, context, interpolator);
  return self;
}

- (instancetype)initWithADContext:(ADContext *)context
               withADInterpolator:(id<ADInterpolator>)interpolator
                      withBoolean:(bool)flywheel {
  ADScroller_initWithADContext_withADInterpolator_withBoolean_(self, context, interpolator, flywheel);
  return self;
}

- (void)setFrictionWithFloat:(float)friction {
  mDeceleration_ = ADScroller_computeDecelerationWithFloat_(self, friction);
  mFlingFriction_ = friction;
}

- (float)computeDecelerationWithFloat:(float)friction {
  return ADScroller_computeDecelerationWithFloat_(self, friction);
}

- (bool)isFinished {
  return mFinished_;
}

- (void)forceFinishedWithBoolean:(bool)finished {
  mFinished_ = finished;
}

- (int32_t)getDuration {
  return mDuration_;
}

- (int32_t)getCurrX {
  return mCurrX_;
}

- (int32_t)getCurrY {
  return mCurrY_;
}

- (float)getCurrVelocity {
  return mMode_ == ADScroller_FLING_MODE ? mCurrVelocity_ : mVelocity_ - mDeceleration_ * [self timePassed] / 2000.0f;
}

- (int32_t)getStartX {
  return mStartX_;
}

- (int32_t)getStartY {
  return mStartY_;
}

- (int32_t)getFinalX {
  return mFinalX_;
}

- (int32_t)getFinalY {
  return mFinalY_;
}

- (bool)computeScrollOffset {
  if (mFinished_) {
    return false;
  }
  int32_t timePassed = (int32_t) (ADAnimationUtils_currentAnimationTimeMillis() - mStartTime_);
  if (timePassed < mDuration_) {
    {
      float x;
      float t;
      int32_t index;
      float distanceCoef;
      float velocityCoef;
      switch (mMode_) {
        case ADScroller_SCROLL_MODE:
        x = [((id<ADInterpolator>) nil_chk(mInterpolator_)) getInterpolationWithFloat:timePassed * mDurationReciprocal_];
        mCurrX_ = mStartX_ + JavaLangMath_roundWithFloat_(x * mDeltaX_);
        mCurrY_ = mStartY_ + JavaLangMath_roundWithFloat_(x * mDeltaY_);
        break;
        case ADScroller_FLING_MODE:
        t = (float) timePassed / mDuration_;
        index = JreFpToInt((ADScroller_NB_SAMPLES * t));
        distanceCoef = 1.f;
        velocityCoef = 0.f;
        if (index < ADScroller_NB_SAMPLES) {
          float t_inf = (float) index / ADScroller_NB_SAMPLES;
          float t_sup = (float) (index + 1) / ADScroller_NB_SAMPLES;
          float d_inf = IOSFloatArray_Get(nil_chk(ADScroller_SPLINE_POSITION), index);
          float d_sup = IOSFloatArray_Get(ADScroller_SPLINE_POSITION, index + 1);
          velocityCoef = (d_sup - d_inf) / (t_sup - t_inf);
          distanceCoef = d_inf + (t - t_inf) * velocityCoef;
        }
        mCurrVelocity_ = velocityCoef * mDistance_ / mDuration_ * 1000.0f;
        mCurrX_ = mStartX_ + JavaLangMath_roundWithFloat_(distanceCoef * (mFinalX_ - mStartX_));
        mCurrX_ = JavaLangMath_minWithInt_withInt_(mCurrX_, mMaxX_);
        mCurrX_ = JavaLangMath_maxWithInt_withInt_(mCurrX_, mMinX_);
        mCurrY_ = mStartY_ + JavaLangMath_roundWithFloat_(distanceCoef * (mFinalY_ - mStartY_));
        mCurrY_ = JavaLangMath_minWithInt_withInt_(mCurrY_, mMaxY_);
        mCurrY_ = JavaLangMath_maxWithInt_withInt_(mCurrY_, mMinY_);
        if (mCurrX_ == mFinalX_ && mCurrY_ == mFinalY_) {
          mFinished_ = true;
        }
        break;
      }
    }
  }
  else {
    mCurrX_ = mFinalX_;
    mCurrY_ = mFinalY_;
    mFinished_ = true;
  }
  return true;
}

- (void)startScrollWithInt:(int32_t)startX
                   withInt:(int32_t)startY
                   withInt:(int32_t)dx
                   withInt:(int32_t)dy {
  [self startScrollWithInt:startX withInt:startY withInt:dx withInt:dy withInt:ADScroller_DEFAULT_DURATION];
}

- (void)startScrollWithInt:(int32_t)startX
                   withInt:(int32_t)startY
                   withInt:(int32_t)dx
                   withInt:(int32_t)dy
                   withInt:(int32_t)duration {
  mMode_ = ADScroller_SCROLL_MODE;
  mFinished_ = false;
  mDuration_ = duration;
  mStartTime_ = ADAnimationUtils_currentAnimationTimeMillis();
  mStartX_ = startX;
  mStartY_ = startY;
  mFinalX_ = startX + dx;
  mFinalY_ = startY + dy;
  mDeltaX_ = dx;
  mDeltaY_ = dy;
  mDurationReciprocal_ = 1.0f / (float) mDuration_;
}

- (void)flingWithInt:(int32_t)startX
             withInt:(int32_t)startY
             withInt:(int32_t)velocityX
             withInt:(int32_t)velocityY
             withInt:(int32_t)minX
             withInt:(int32_t)maxX
             withInt:(int32_t)minY
             withInt:(int32_t)maxY {
  if (mFlywheel_ && !mFinished_) {
    float oldVel = [self getCurrVelocity];
    float dx = (float) (mFinalX_ - mStartX_);
    float dy = (float) (mFinalY_ - mStartY_);
    float hyp = (float) JavaLangMath_hypotWithDouble_withDouble_(dx, dy);
    float ndx = dx / hyp;
    float ndy = dy / hyp;
    float oldVelocityX = ndx * oldVel;
    float oldVelocityY = ndy * oldVel;
    if (JavaLangMath_signumWithFloat_(velocityX) == JavaLangMath_signumWithFloat_(oldVelocityX) && JavaLangMath_signumWithFloat_(velocityY) == JavaLangMath_signumWithFloat_(oldVelocityY)) {
      JrePlusAssignIntF(&velocityX, oldVelocityX);
      JrePlusAssignIntF(&velocityY, oldVelocityY);
    }
  }
  mMode_ = ADScroller_FLING_MODE;
  mFinished_ = false;
  float velocity = (float) JavaLangMath_hypotWithDouble_withDouble_(velocityX, velocityY);
  mVelocity_ = velocity;
  mDuration_ = ADScroller_getSplineFlingDurationWithFloat_(self, velocity);
  mStartTime_ = ADAnimationUtils_currentAnimationTimeMillis();
  mStartX_ = startX;
  mStartY_ = startY;
  float coeffX = velocity == 0 ? 1.0f : velocityX / velocity;
  float coeffY = velocity == 0 ? 1.0f : velocityY / velocity;
  double totalDistance = ADScroller_getSplineFlingDistanceWithFloat_(self, velocity);
  mDistance_ = JreFpToInt((totalDistance * JavaLangMath_signumWithFloat_(velocity)));
  mMinX_ = minX;
  mMaxX_ = maxX;
  mMinY_ = minY;
  mMaxY_ = maxY;
  mFinalX_ = startX + (int32_t) JavaLangMath_roundWithDouble_(totalDistance * coeffX);
  mFinalX_ = JavaLangMath_minWithInt_withInt_(mFinalX_, mMaxX_);
  mFinalX_ = JavaLangMath_maxWithInt_withInt_(mFinalX_, mMinX_);
  mFinalY_ = startY + (int32_t) JavaLangMath_roundWithDouble_(totalDistance * coeffY);
  mFinalY_ = JavaLangMath_minWithInt_withInt_(mFinalY_, mMaxY_);
  mFinalY_ = JavaLangMath_maxWithInt_withInt_(mFinalY_, mMinY_);
}

- (double)getSplineDecelerationWithFloat:(float)velocity {
  return ADScroller_getSplineDecelerationWithFloat_(self, velocity);
}

- (int32_t)getSplineFlingDurationWithFloat:(float)velocity {
  return ADScroller_getSplineFlingDurationWithFloat_(self, velocity);
}

- (double)getSplineFlingDistanceWithFloat:(float)velocity {
  return ADScroller_getSplineFlingDistanceWithFloat_(self, velocity);
}

- (void)abortAnimation {
  mCurrX_ = mFinalX_;
  mCurrY_ = mFinalY_;
  mFinished_ = true;
}

- (void)extendDurationWithInt:(int32_t)extend {
  int32_t passed = [self timePassed];
  mDuration_ = passed + extend;
  mDurationReciprocal_ = 1.0f / mDuration_;
  mFinished_ = false;
}

- (int32_t)timePassed {
  return (int32_t) (ADAnimationUtils_currentAnimationTimeMillis() - mStartTime_);
}

- (void)setFinalXWithInt:(int32_t)newX {
  mFinalX_ = newX;
  mDeltaX_ = mFinalX_ - mStartX_;
  mFinished_ = false;
}

- (void)setFinalYWithInt:(int32_t)newY {
  mFinalY_ = newY;
  mDeltaY_ = mFinalY_ - mStartY_;
  mFinished_ = false;
}

- (bool)isScrollingInDirectionWithFloat:(float)xvel
                              withFloat:(float)yvel {
  return !mFinished_ && JavaLangMath_signumWithFloat_(xvel) == JavaLangMath_signumWithFloat_(mFinalX_ - mStartX_) && JavaLangMath_signumWithFloat_(yvel) == JavaLangMath_signumWithFloat_(mFinalY_ - mStartY_);
}

- (void)dealloc {
  RELEASE_(mInterpolator_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x1, -1, 0, -1, -1, -1, -1 },
    { NULL, NULL, 0x1, -1, 1, -1, -1, -1, -1 },
    { NULL, NULL, 0x1, -1, 2, -1, -1, -1, -1 },
    { NULL, "V", 0x11, 3, 4, -1, -1, -1, -1 },
    { NULL, "F", 0x2, 5, 4, -1, -1, -1, -1 },
    { NULL, "Z", 0x11, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x11, 6, 7, -1, -1, -1, -1 },
    { NULL, "I", 0x11, -1, -1, -1, -1, -1, -1 },
    { NULL, "I", 0x11, -1, -1, -1, -1, -1, -1 },
    { NULL, "I", 0x11, -1, -1, -1, -1, -1, -1 },
    { NULL, "F", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "I", 0x11, -1, -1, -1, -1, -1, -1 },
    { NULL, "I", 0x11, -1, -1, -1, -1, -1, -1 },
    { NULL, "I", 0x11, -1, -1, -1, -1, -1, -1 },
    { NULL, "I", 0x11, -1, -1, -1, -1, -1, -1 },
    { NULL, "Z", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 8, 9, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 8, 10, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 11, 12, -1, -1, -1, -1 },
    { NULL, "D", 0x2, 13, 4, -1, -1, -1, -1 },
    { NULL, "I", 0x2, 14, 4, -1, -1, -1, -1 },
    { NULL, "D", 0x2, 15, 4, -1, -1, -1, -1 },
    { NULL, "V", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 16, 17, -1, -1, -1, -1 },
    { NULL, "I", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 18, 17, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 19, 17, -1, -1, -1, -1 },
    { NULL, "Z", 0x1, 20, 21, -1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(initWithADContext:);
  methods[1].selector = @selector(initWithADContext:withADInterpolator:);
  methods[2].selector = @selector(initWithADContext:withADInterpolator:withBoolean:);
  methods[3].selector = @selector(setFrictionWithFloat:);
  methods[4].selector = @selector(computeDecelerationWithFloat:);
  methods[5].selector = @selector(isFinished);
  methods[6].selector = @selector(forceFinishedWithBoolean:);
  methods[7].selector = @selector(getDuration);
  methods[8].selector = @selector(getCurrX);
  methods[9].selector = @selector(getCurrY);
  methods[10].selector = @selector(getCurrVelocity);
  methods[11].selector = @selector(getStartX);
  methods[12].selector = @selector(getStartY);
  methods[13].selector = @selector(getFinalX);
  methods[14].selector = @selector(getFinalY);
  methods[15].selector = @selector(computeScrollOffset);
  methods[16].selector = @selector(startScrollWithInt:withInt:withInt:withInt:);
  methods[17].selector = @selector(startScrollWithInt:withInt:withInt:withInt:withInt:);
  methods[18].selector = @selector(flingWithInt:withInt:withInt:withInt:withInt:withInt:withInt:withInt:);
  methods[19].selector = @selector(getSplineDecelerationWithFloat:);
  methods[20].selector = @selector(getSplineFlingDurationWithFloat:);
  methods[21].selector = @selector(getSplineFlingDistanceWithFloat:);
  methods[22].selector = @selector(abortAnimation);
  methods[23].selector = @selector(extendDurationWithInt:);
  methods[24].selector = @selector(timePassed);
  methods[25].selector = @selector(setFinalXWithInt:);
  methods[26].selector = @selector(setFinalYWithInt:);
  methods[27].selector = @selector(isScrollingInDirectionWithFloat:withFloat:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "mInterpolator_", "LADInterpolator;", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
    { "mMode_", "I", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "mStartX_", "I", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "mStartY_", "I", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "mFinalX_", "I", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "mFinalY_", "I", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "mMinX_", "I", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "mMaxX_", "I", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "mMinY_", "I", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "mMaxY_", "I", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "mCurrX_", "I", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "mCurrY_", "I", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "mStartTime_", "J", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "mDuration_", "I", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "mDurationReciprocal_", "F", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "mDeltaX_", "F", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "mDeltaY_", "F", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "mFinished_", "Z", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "mFlywheel_", "Z", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "mVelocity_", "F", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "mCurrVelocity_", "F", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "mDistance_", "I", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "mFlingFriction_", "F", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "DEFAULT_DURATION", "I", .constantValue.asInt = ADScroller_DEFAULT_DURATION, 0x1a, -1, -1, -1, -1 },
    { "SCROLL_MODE", "I", .constantValue.asInt = ADScroller_SCROLL_MODE, 0x1a, -1, -1, -1, -1 },
    { "FLING_MODE", "I", .constantValue.asInt = ADScroller_FLING_MODE, 0x1a, -1, -1, -1, -1 },
    { "DECELERATION_RATE", "F", .constantValue.asLong = 0, 0xa, -1, 22, -1, -1 },
    { "INFLEXION", "F", .constantValue.asFloat = ADScroller_INFLEXION, 0x1a, -1, -1, -1, -1 },
    { "START_TENSION", "F", .constantValue.asFloat = ADScroller_START_TENSION, 0x1a, -1, -1, -1, -1 },
    { "END_TENSION", "F", .constantValue.asFloat = ADScroller_END_TENSION, 0x1a, -1, -1, -1, -1 },
    { "P1", "F", .constantValue.asFloat = ADScroller_P1, 0x1a, -1, -1, -1, -1 },
    { "P2", "F", .constantValue.asFloat = ADScroller_P2, 0x1a, -1, -1, -1, -1 },
    { "NB_SAMPLES", "I", .constantValue.asInt = ADScroller_NB_SAMPLES, 0x1a, -1, -1, -1, -1 },
    { "SPLINE_POSITION", "[F", .constantValue.asLong = 0, 0x1a, -1, 23, -1, -1 },
    { "SPLINE_TIME", "[F", .constantValue.asLong = 0, 0x1a, -1, 24, -1, -1 },
    { "mDeceleration_", "F", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "mPpi_", "F", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
    { "mPhysicalCoeff_", "F", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "LADContext;", "LADContext;LADInterpolator;", "LADContext;LADInterpolator;Z", "setFriction", "F", "computeDeceleration", "forceFinished", "Z", "startScroll", "IIII", "IIIII", "fling", "IIIIIIII", "getSplineDeceleration", "getSplineFlingDuration", "getSplineFlingDistance", "extendDuration", "I", "setFinalX", "setFinalY", "isScrollingInDirection", "FF", &ADScroller_DECELERATION_RATE, &ADScroller_SPLINE_POSITION, &ADScroller_SPLINE_TIME, "LADScroller_ViscousFluidInterpolator;" };
  static const J2ObjcClassInfo _ADScroller = { "Scroller", "r.android.widget", ptrTable, methods, fields, 7, 0x1, 28, 38, -1, 25, -1, -1, -1 };
  return &_ADScroller;
}

+ (void)initialize {
  if (self == [ADScroller class]) {
    ADScroller_DECELERATION_RATE = (float) (JavaLangMath_logWithDouble_(0.78) / JavaLangMath_logWithDouble_(0.9));
    JreStrongAssignAndConsume(&ADScroller_SPLINE_POSITION, [IOSFloatArray newArrayWithLength:ADScroller_NB_SAMPLES + 1]);
    JreStrongAssignAndConsume(&ADScroller_SPLINE_TIME, [IOSFloatArray newArrayWithLength:ADScroller_NB_SAMPLES + 1]);
    {
      float x_min = 0.0f;
      float y_min = 0.0f;
      for (int32_t i = 0; i < ADScroller_NB_SAMPLES; i++) {
        float alpha = (float) i / ADScroller_NB_SAMPLES;
        float x_max = 1.0f;
        float x;
        float tx;
        float coef;
        while (true) {
          x = x_min + (x_max - x_min) / 2.0f;
          coef = 3.0f * x * (1.0f - x);
          tx = coef * ((1.0f - x) * ADScroller_P1 + x * ADScroller_P2) + x * x * x;
          if (JavaLangMath_absWithFloat_(tx - alpha) < 1E-5) break;
          if (tx > alpha) x_max = x;
          else x_min = x;
        }
        *IOSFloatArray_GetRef(ADScroller_SPLINE_POSITION, i) = coef * ((1.0f - x) * ADScroller_START_TENSION + x) + x * x * x;
        float y_max = 1.0f;
        float y;
        float dy;
        while (true) {
          y = y_min + (y_max - y_min) / 2.0f;
          coef = 3.0f * y * (1.0f - y);
          dy = coef * ((1.0f - y) * ADScroller_START_TENSION + y) + y * y * y;
          if (JavaLangMath_absWithFloat_(dy - alpha) < 1E-5) break;
          if (dy > alpha) y_max = y;
          else y_min = y;
        }
        *IOSFloatArray_GetRef(ADScroller_SPLINE_TIME, i) = coef * ((1.0f - y) * ADScroller_P1 + y * ADScroller_P2) + y * y * y;
      }
      *IOSFloatArray_GetRef(ADScroller_SPLINE_POSITION, ADScroller_NB_SAMPLES) = *IOSFloatArray_GetRef(ADScroller_SPLINE_TIME, ADScroller_NB_SAMPLES) = 1.0f;
    }
    J2OBJC_SET_INITIALIZED(ADScroller)
  }
}

@end

void ADScroller_initWithADContext_(ADScroller *self, ADContext *context) {
  ADScroller_initWithADContext_withADInterpolator_(self, context, nil);
}

ADScroller *new_ADScroller_initWithADContext_(ADContext *context) {
  J2OBJC_NEW_IMPL(ADScroller, initWithADContext_, context)
}

ADScroller *create_ADScroller_initWithADContext_(ADContext *context) {
  J2OBJC_CREATE_IMPL(ADScroller, initWithADContext_, context)
}

void ADScroller_initWithADContext_withADInterpolator_(ADScroller *self, ADContext *context, id<ADInterpolator> interpolator) {
  ADScroller_initWithADContext_withADInterpolator_withBoolean_(self, context, interpolator, ((ADApplicationInfo *) nil_chk([((ADContext *) nil_chk(context)) getApplicationInfo]))->targetSdkVersion_ >= ADBuild_VERSION_CODES_HONEYCOMB);
}

ADScroller *new_ADScroller_initWithADContext_withADInterpolator_(ADContext *context, id<ADInterpolator> interpolator) {
  J2OBJC_NEW_IMPL(ADScroller, initWithADContext_withADInterpolator_, context, interpolator)
}

ADScroller *create_ADScroller_initWithADContext_withADInterpolator_(ADContext *context, id<ADInterpolator> interpolator) {
  J2OBJC_CREATE_IMPL(ADScroller, initWithADContext_withADInterpolator_, context, interpolator)
}

void ADScroller_initWithADContext_withADInterpolator_withBoolean_(ADScroller *self, ADContext *context, id<ADInterpolator> interpolator, bool flywheel) {
  NSObject_init(self);
  self->mFlingFriction_ = ADViewConfiguration_getScrollFriction();
  self->mFinished_ = true;
  if (interpolator == nil) {
    JreStrongAssignAndConsume(&self->mInterpolator_, new_ADScroller_ViscousFluidInterpolator_init());
  }
  else {
    JreStrongAssign(&self->mInterpolator_, interpolator);
  }
  self->mPpi_ = ((ADDisplayMetrics *) nil_chk([((ADResources *) nil_chk([((ADContext *) nil_chk(context)) getResources])) getDisplayMetrics]))->density_ * 160.0f;
  self->mDeceleration_ = ADScroller_computeDecelerationWithFloat_(self, ADViewConfiguration_getScrollFriction());
  self->mFlywheel_ = flywheel;
  self->mPhysicalCoeff_ = ADScroller_computeDecelerationWithFloat_(self, 0.84f);
}

ADScroller *new_ADScroller_initWithADContext_withADInterpolator_withBoolean_(ADContext *context, id<ADInterpolator> interpolator, bool flywheel) {
  J2OBJC_NEW_IMPL(ADScroller, initWithADContext_withADInterpolator_withBoolean_, context, interpolator, flywheel)
}

ADScroller *create_ADScroller_initWithADContext_withADInterpolator_withBoolean_(ADContext *context, id<ADInterpolator> interpolator, bool flywheel) {
  J2OBJC_CREATE_IMPL(ADScroller, initWithADContext_withADInterpolator_withBoolean_, context, interpolator, flywheel)
}

float ADScroller_computeDecelerationWithFloat_(ADScroller *self, float friction) {
  return ADSensorManager_GRAVITY_EARTH * 39.37f * self->mPpi_ * friction;
}

double ADScroller_getSplineDecelerationWithFloat_(ADScroller *self, float velocity) {
  return JavaLangMath_logWithDouble_(ADScroller_INFLEXION * JavaLangMath_absWithFloat_(velocity) / (self->mFlingFriction_ * self->mPhysicalCoeff_));
}

int32_t ADScroller_getSplineFlingDurationWithFloat_(ADScroller *self, float velocity) {
  double l = ADScroller_getSplineDecelerationWithFloat_(self, velocity);
  double decelMinusOne = ADScroller_DECELERATION_RATE - 1.0;
  return JreFpToInt((1000.0 * JavaLangMath_expWithDouble_(l / decelMinusOne)));
}

double ADScroller_getSplineFlingDistanceWithFloat_(ADScroller *self, float velocity) {
  double l = ADScroller_getSplineDecelerationWithFloat_(self, velocity);
  double decelMinusOne = ADScroller_DECELERATION_RATE - 1.0;
  return self->mFlingFriction_ * self->mPhysicalCoeff_ * JavaLangMath_expWithDouble_(ADScroller_DECELERATION_RATE / decelMinusOne * l);
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ADScroller)

J2OBJC_NAME_MAPPING(ADScroller, "r.android.widget", "AD")

J2OBJC_INITIALIZED_DEFN(ADScroller_ViscousFluidInterpolator)

@implementation ADScroller_ViscousFluidInterpolator

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype)init {
  ADScroller_ViscousFluidInterpolator_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

+ (float)viscousFluidWithFloat:(float)x {
  return ADScroller_ViscousFluidInterpolator_viscousFluidWithFloat_(x);
}

- (float)getInterpolationWithFloat:(float)input {
  float interpolated = ADScroller_ViscousFluidInterpolator_VISCOUS_FLUID_NORMALIZE * ADScroller_ViscousFluidInterpolator_viscousFluidWithFloat_(input);
  if (interpolated > 0) {
    return interpolated + ADScroller_ViscousFluidInterpolator_VISCOUS_FLUID_OFFSET;
  }
  return interpolated;
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x0, -1, -1, -1, -1, -1, -1 },
    { NULL, "F", 0xa, 0, 1, -1, -1, -1, -1 },
    { NULL, "F", 0x1, 2, 1, -1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(init);
  methods[1].selector = @selector(viscousFluidWithFloat:);
  methods[2].selector = @selector(getInterpolationWithFloat:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "VISCOUS_FLUID_SCALE", "F", .constantValue.asFloat = ADScroller_ViscousFluidInterpolator_VISCOUS_FLUID_SCALE, 0x1a, -1, -1, -1, -1 },
    { "VISCOUS_FLUID_NORMALIZE", "F", .constantValue.asLong = 0, 0x1a, -1, 3, -1, -1 },
    { "VISCOUS_FLUID_OFFSET", "F", .constantValue.asLong = 0, 0x1a, -1, 4, -1, -1 },
  };
  static const void *ptrTable[] = { "viscousFluid", "F", "getInterpolation", &ADScroller_ViscousFluidInterpolator_VISCOUS_FLUID_NORMALIZE, &ADScroller_ViscousFluidInterpolator_VISCOUS_FLUID_OFFSET, "LADScroller;" };
  static const J2ObjcClassInfo _ADScroller_ViscousFluidInterpolator = { "ViscousFluidInterpolator", "r.android.widget", ptrTable, methods, fields, 7, 0x8, 3, 3, 5, -1, -1, -1, -1 };
  return &_ADScroller_ViscousFluidInterpolator;
}

+ (void)initialize {
  if (self == [ADScroller_ViscousFluidInterpolator class]) {
    {
      ADScroller_ViscousFluidInterpolator_VISCOUS_FLUID_NORMALIZE = 1.0f / ADScroller_ViscousFluidInterpolator_viscousFluidWithFloat_(1.0f);
      ADScroller_ViscousFluidInterpolator_VISCOUS_FLUID_OFFSET = 1.0f - ADScroller_ViscousFluidInterpolator_VISCOUS_FLUID_NORMALIZE * ADScroller_ViscousFluidInterpolator_viscousFluidWithFloat_(1.0f);
    }
    J2OBJC_SET_INITIALIZED(ADScroller_ViscousFluidInterpolator)
  }
}

@end

void ADScroller_ViscousFluidInterpolator_init(ADScroller_ViscousFluidInterpolator *self) {
  NSObject_init(self);
}

ADScroller_ViscousFluidInterpolator *new_ADScroller_ViscousFluidInterpolator_init() {
  J2OBJC_NEW_IMPL(ADScroller_ViscousFluidInterpolator, init)
}

ADScroller_ViscousFluidInterpolator *create_ADScroller_ViscousFluidInterpolator_init() {
  J2OBJC_CREATE_IMPL(ADScroller_ViscousFluidInterpolator, init)
}

float ADScroller_ViscousFluidInterpolator_viscousFluidWithFloat_(float x) {
  ADScroller_ViscousFluidInterpolator_initialize();
  JreTimesAssignFloatF(&x, ADScroller_ViscousFluidInterpolator_VISCOUS_FLUID_SCALE);
  if (x < 1.0f) {
    JreMinusAssignFloatF(&x, (1.0f - (float) JavaLangMath_expWithDouble_(-x)));
  }
  else {
    float start = 0.36787944117f;
    x = 1.0f - (float) JavaLangMath_expWithDouble_(1.0f - x);
    x = start + x * (1.0f - start);
  }
  return x;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ADScroller_ViscousFluidInterpolator)
