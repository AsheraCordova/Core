//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: D:\Java\git\core-javafx-widget\AndroidJMaterial\src\main\java\com\google\android\material\internal\FlowLayout.java
//

#define J2OBJC_IMPORTED_BY_JAVA_IMPLEMENTATION 1




#include "FlowLayout.h"
#include "J2ObjC_source.h"
#include "MarginLayoutParamsCompat.h"
#include "R.h"
#include "View.h"
#include "ViewCompat.h"
#include "ViewGroup.h"
#include "java/lang/Boolean.h"
#include "java/lang/Integer.h"
#include "java/lang/Math.h"




#pragma clang diagnostic error "-Wreturn-type"
#pragma clang diagnostic ignored "-Wswitch"


@interface ADXFlowLayout () {
 @public
  int32_t lineSpacing_;
  int32_t itemSpacing_;
  bool singleLine_;
  int32_t rowCount_;
}

+ (int32_t)getMeasuredDimensionWithInt:(int32_t)size
                               withInt:(int32_t)mode
                               withInt:(int32_t)childrenEdge;

@end

__attribute__((unused)) static int32_t ADXFlowLayout_getMeasuredDimensionWithInt_withInt_withInt_(int32_t size, int32_t mode, int32_t childrenEdge);

@implementation ADXFlowLayout

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype)init {
  ADXFlowLayout_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

- (void)setLineSpacingWithInt:(int32_t)lineSpacing {
  self->lineSpacing_ = lineSpacing;
}

- (void)setItemSpacingWithInt:(int32_t)itemSpacing {
  self->itemSpacing_ = itemSpacing;
}

- (bool)isSingleLine {
  return singleLine_;
}

- (void)setSingleLineWithBoolean:(bool)singleLine {
  self->singleLine_ = singleLine;
}

- (void)onMeasureWithInt:(int32_t)widthMeasureSpec
                 withInt:(int32_t)heightMeasureSpec {
  int32_t width = ADView_MeasureSpec_getSizeWithInt_(widthMeasureSpec);
  int32_t widthMode = ADView_MeasureSpec_getModeWithInt_(widthMeasureSpec);
  int32_t height = ADView_MeasureSpec_getSizeWithInt_(heightMeasureSpec);
  int32_t heightMode = ADView_MeasureSpec_getModeWithInt_(heightMeasureSpec);
  int32_t maxWidth = widthMode == ADView_MeasureSpec_AT_MOST || widthMode == ADView_MeasureSpec_EXACTLY ? width : JavaLangInteger_MAX_VALUE;
  int32_t childLeft = [self getPaddingLeft];
  int32_t childTop = [self getPaddingTop];
  int32_t childBottom = childTop;
  int32_t childRight = childLeft;
  int32_t maxChildRight = 0;
  int32_t maxRight = maxWidth - [self getPaddingRight];
  for (int32_t i = 0; i < [self getChildCount]; i++) {
    ADView *child = JreRetainedLocalValue([self getChildAtWithInt:i]);
    if ([((ADView *) nil_chk(child)) getVisibility] == ADView_GONE) {
      continue;
    }
    [self measureChildWithADView:child withInt:widthMeasureSpec withInt:heightMeasureSpec];
    ADViewGroup_LayoutParams *lp = JreRetainedLocalValue([child getLayoutParams]);
    int32_t leftMargin = 0;
    int32_t rightMargin = 0;
    if ([lp isKindOfClass:[ADViewGroup_MarginLayoutParams class]]) {
      ADViewGroup_MarginLayoutParams *marginLp = (ADViewGroup_MarginLayoutParams *) lp;
      leftMargin += ((ADViewGroup_MarginLayoutParams *) nil_chk(marginLp))->leftMargin_;
      rightMargin += marginLp->rightMargin_;
    }
    childRight = childLeft + leftMargin + [child getMeasuredWidth];
    if (childRight > maxRight && ![self isSingleLine]) {
      childLeft = [self getPaddingLeft];
      childTop = childBottom + lineSpacing_;
    }
    childRight = childLeft + leftMargin + [child getMeasuredWidth];
    childBottom = childTop + [child getMeasuredHeight];
    if (childRight > maxChildRight) {
      maxChildRight = childRight;
    }
    childLeft += (leftMargin + rightMargin + [child getMeasuredWidth]) + itemSpacing_;
    if (i == ([self getChildCount] - 1)) {
      maxChildRight += rightMargin;
    }
  }
  maxChildRight += [self getPaddingRight];
  childBottom += [self getPaddingBottom];
  int32_t finalWidth = ADXFlowLayout_getMeasuredDimensionWithInt_withInt_withInt_(width, widthMode, maxChildRight);
  int32_t finalHeight = ADXFlowLayout_getMeasuredDimensionWithInt_withInt_withInt_(height, heightMode, childBottom);
  [self setMeasuredDimensionWithInt:finalWidth withInt:finalHeight];
}

+ (int32_t)getMeasuredDimensionWithInt:(int32_t)size
                               withInt:(int32_t)mode
                               withInt:(int32_t)childrenEdge {
  return ADXFlowLayout_getMeasuredDimensionWithInt_withInt_withInt_(size, mode, childrenEdge);
}

- (void)onLayoutWithBoolean:(bool)sizeChanged
                    withInt:(int32_t)left
                    withInt:(int32_t)top
                    withInt:(int32_t)right
                    withInt:(int32_t)bottom {
  if ([self getChildCount] == 0) {
    rowCount_ = 0;
    return;
  }
  rowCount_ = 1;
  bool isRtl = ADXViewCompat_getLayoutDirectionWithADView_(self) == ADXViewCompat_LAYOUT_DIRECTION_RTL;
  int32_t paddingStart = isRtl ? [self getPaddingRight] : [self getPaddingLeft];
  int32_t paddingEnd = isRtl ? [self getPaddingLeft] : [self getPaddingRight];
  int32_t childStart = paddingStart;
  int32_t childTop = [self getPaddingTop];
  int32_t childBottom = childTop;
  int32_t childEnd;
  int32_t maxChildEnd = right - left - paddingEnd;
  for (int32_t i = 0; i < [self getChildCount]; i++) {
    ADView *child = JreRetainedLocalValue([self getChildAtWithInt:i]);
    if ([((ADView *) nil_chk(child)) getVisibility] == ADView_GONE) {
      [child setTagWithInt:JreLoadStatic(ADR_id, row_index_key) withId:JavaLangInteger_valueOfWithInt_(-1)];
      continue;
    }
    ADViewGroup_LayoutParams *lp = JreRetainedLocalValue([child getLayoutParams]);
    int32_t startMargin = 0;
    int32_t endMargin = 0;
    if ([lp isKindOfClass:[ADViewGroup_MarginLayoutParams class]]) {
      ADViewGroup_MarginLayoutParams *marginLp = (ADViewGroup_MarginLayoutParams *) lp;
      startMargin = ADXMarginLayoutParamsCompat_getMarginStartWithADViewGroup_MarginLayoutParams_(marginLp);
      endMargin = ADXMarginLayoutParamsCompat_getMarginEndWithADViewGroup_MarginLayoutParams_(marginLp);
    }
    childEnd = childStart + startMargin + [child getMeasuredWidth];
    if (!singleLine_ && (childEnd > maxChildEnd)) {
      childStart = paddingStart;
      childTop = childBottom + lineSpacing_;
      rowCount_++;
    }
    [child setTagWithInt:JreLoadStatic(ADR_id, row_index_key) withId:JavaLangInteger_valueOfWithInt_(rowCount_ - 1)];
    childEnd = childStart + startMargin + [child getMeasuredWidth];
    childBottom = childTop + [child getMeasuredHeight];
    if (isRtl) {
      [child layoutWithInt:maxChildEnd - childEnd withInt:childTop withInt:maxChildEnd - childStart - startMargin withInt:childBottom];
    }
    else {
      [child layoutWithInt:childStart + startMargin withInt:childTop withInt:childEnd withInt:childBottom];
    }
    childStart += (startMargin + endMargin + [child getMeasuredWidth]) + itemSpacing_;
  }
}

- (int32_t)getRowCount {
  return rowCount_;
}

- (int32_t)getRowIndexWithADView:(ADView *)child {
  id index = JreRetainedLocalValue([((ADView *) nil_chk(child)) getTagWithInt:JreLoadStatic(ADR_id, row_index_key)]);
  if (!([index isKindOfClass:[JavaLangInteger class]])) {
    return -1;
  }
  return [((JavaLangInteger *) nil_chk((JavaLangInteger *) cast_chk(index, [JavaLangInteger class]))) intValue];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x4, 0, 1, -1, -1, -1, -1 },
    { NULL, "V", 0x4, 2, 1, -1, -1, -1, -1 },
    { NULL, "Z", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 3, 4, -1, -1, -1, -1 },
    { NULL, "V", 0x4, 5, 6, -1, -1, -1, -1 },
    { NULL, "I", 0xa, 7, 8, -1, -1, -1, -1 },
    { NULL, "V", 0x4, 9, 10, -1, -1, -1, -1 },
    { NULL, "I", 0x4, -1, -1, -1, -1, -1, -1 },
    { NULL, "I", 0x1, 11, 12, -1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(init);
  methods[1].selector = @selector(setLineSpacingWithInt:);
  methods[2].selector = @selector(setItemSpacingWithInt:);
  methods[3].selector = @selector(isSingleLine);
  methods[4].selector = @selector(setSingleLineWithBoolean:);
  methods[5].selector = @selector(onMeasureWithInt:withInt:);
  methods[6].selector = @selector(getMeasuredDimensionWithInt:withInt:withInt:);
  methods[7].selector = @selector(onLayoutWithBoolean:withInt:withInt:withInt:withInt:);
  methods[8].selector = @selector(getRowCount);
  methods[9].selector = @selector(getRowIndexWithADView:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "lineSpacing_", "I", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "itemSpacing_", "I", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "singleLine_", "Z", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "rowCount_", "I", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "setLineSpacing", "I", "setItemSpacing", "setSingleLine", "Z", "onMeasure", "II", "getMeasuredDimension", "III", "onLayout", "ZIIII", "getRowIndex", "LADView;" };
  static const J2ObjcClassInfo _ADXFlowLayout = { "FlowLayout", "com.google.android.material.internal", ptrTable, methods, fields, 7, 0x1, 10, 4, -1, -1, -1, -1, -1 };
  return &_ADXFlowLayout;
}

@end

void ADXFlowLayout_init(ADXFlowLayout *self) {
  ADViewGroup_init(self);
}

ADXFlowLayout *new_ADXFlowLayout_init() {
  J2OBJC_NEW_IMPL(ADXFlowLayout, init)
}

ADXFlowLayout *create_ADXFlowLayout_init() {
  J2OBJC_CREATE_IMPL(ADXFlowLayout, init)
}

int32_t ADXFlowLayout_getMeasuredDimensionWithInt_withInt_withInt_(int32_t size, int32_t mode, int32_t childrenEdge) {
  ADXFlowLayout_initialize();
  switch (mode) {
    case ADView_MeasureSpec_EXACTLY:
    return size;
    case ADView_MeasureSpec_AT_MOST:
    return JavaLangMath_minWithInt_withInt_(childrenEdge, size);
    default:
    return childrenEdge;
  }
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ADXFlowLayout)

J2OBJC_NAME_MAPPING(ADXFlowLayout, "com.google.android.material.internal", "ADX")
